{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import MovieCard from'../components/MovieCard';import api from'../services/api';import'./Search.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Search=()=>{const location=useLocation();const query=new URLSearchParams(location.search).get('q')||'';const[searchResults,setSearchResults]=useState([]);const[loading,setLoading]=useState(true);const[searchQuery,setSearchQuery]=useState(query);useEffect(()=>{const fetchSearchResults=async()=>{if(query){setLoading(true);try{const results=await api.searchMovies(query);setSearchResults(results);}catch(error){console.error('Error searching movies:',error);}finally{setLoading(false);}}else{setSearchResults([]);setLoading(false);}};fetchSearchResults();setSearchQuery(query);},[query]);const handleSearch=async e=>{e.preventDefault();if(searchQuery.trim()){setLoading(true);try{const results=await api.searchMovies(searchQuery);setSearchResults(results);}catch(error){console.error('Error searching movies:',error);}finally{setLoading(false);}// Update URL without reloading the page\nconst newUrl=`/search?q=${encodeURIComponent(searchQuery.trim())}`;window.history.pushState({path:newUrl},'',newUrl);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-header\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"search-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for movies...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"search-button\",children:\"Search\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Searching...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[query&&/*#__PURE__*/_jsx(\"h2\",{className:\"results-title\",children:searchResults.length>0?`Search results for \"${query}\"`:`No results found for \"${query}\"`}),searchResults.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:searchResults.map(movie=>/*#__PURE__*/_jsx(MovieCard,{movie:movie},movie.id))}):!loading&&query&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-results\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No movies found matching your search.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Try different keywords or check your spelling.\"})]})]})})]});};export default Search;","map":{"version":3,"names":["React","useState","useEffect","useLocation","MovieCard","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Search","location","query","URLSearchParams","search","get","searchResults","setSearchResults","loading","setLoading","searchQuery","setSearchQuery","fetchSearchResults","results","searchMovies","error","console","handleSearch","e","preventDefault","trim","newUrl","encodeURIComponent","window","history","pushState","path","className","children","onSubmit","type","placeholder","value","onChange","target","length","map","movie","id"],"sources":["C:/Users/hp/.cursor-tutor/netflix-clone/src/pages/Search.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport MovieCard from '../components/MovieCard';\r\nimport api from '../services/api';\r\nimport './Search.css';\r\n\r\nconst Search = () => {\r\n  const location = useLocation();\r\n  const query = new URLSearchParams(location.search).get('q') || '';\r\n  \r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState(query);\r\n\r\n  useEffect(() => {\r\n    const fetchSearchResults = async () => {\r\n      if (query) {\r\n        setLoading(true);\r\n        try {\r\n          const results = await api.searchMovies(query);\r\n          setSearchResults(results);\r\n        } catch (error) {\r\n          console.error('Error searching movies:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      } else {\r\n        setSearchResults([]);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSearchResults();\r\n    setSearchQuery(query);\r\n  }, [query]);\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (searchQuery.trim()) {\r\n      setLoading(true);\r\n      try {\r\n        const results = await api.searchMovies(searchQuery);\r\n        setSearchResults(results);\r\n      } catch (error) {\r\n        console.error('Error searching movies:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n      \r\n      // Update URL without reloading the page\r\n      const newUrl = `/search?q=${encodeURIComponent(searchQuery.trim())}`;\r\n      window.history.pushState({ path: newUrl }, '', newUrl);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-page\">\r\n      <div className=\"search-header\">\r\n        <form onSubmit={handleSearch} className=\"search-form\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search for movies...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"search-input\"\r\n          />\r\n          <button type=\"submit\" className=\"search-button\">Search</button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"search-results\">\r\n        {loading ? (\r\n          <div className=\"loading\">Searching...</div>\r\n        ) : (\r\n          <>\r\n            {query && (\r\n              <h2 className=\"results-title\">\r\n                {searchResults.length > 0 \r\n                  ? `Search results for \"${query}\"`\r\n                  : `No results found for \"${query}\"`}\r\n              </h2>\r\n            )}\r\n            \r\n            {searchResults.length > 0 ? (\r\n              <div className=\"movie-grid\">\r\n                {searchResults.map(movie => (\r\n                  <MovieCard key={movie.id} movie={movie} />\r\n                ))}\r\n              </div>\r\n            ) : !loading && query && (\r\n              <div className=\"no-results\">\r\n                <p>No movies found matching your search.</p>\r\n                <p>Try different keywords or check your spelling.</p>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CACjC,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtB,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,KAAK,CAAG,GAAI,CAAAC,eAAe,CAACF,QAAQ,CAACG,MAAM,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC,EAAI,EAAE,CAEjE,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACqB,WAAW,CAAEC,cAAc,CAAC,CAAGtB,QAAQ,CAACa,KAAK,CAAC,CAErDZ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsB,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAIV,KAAK,CAAE,CACTO,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAI,OAAO,CAAG,KAAM,CAAApB,GAAG,CAACqB,YAAY,CAACZ,KAAK,CAAC,CAC7CK,gBAAgB,CAACM,OAAO,CAAC,CAC3B,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,IAAM,CACLF,gBAAgB,CAAC,EAAE,CAAC,CACpBE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDG,kBAAkB,CAAC,CAAC,CACpBD,cAAc,CAACT,KAAK,CAAC,CACvB,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAe,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAIT,WAAW,CAACU,IAAI,CAAC,CAAC,CAAE,CACtBX,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAI,OAAO,CAAG,KAAM,CAAApB,GAAG,CAACqB,YAAY,CAACJ,WAAW,CAAC,CACnDH,gBAAgB,CAACM,OAAO,CAAC,CAC3B,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CAEA;AACA,KAAM,CAAAY,MAAM,CAAG,aAAaC,kBAAkB,CAACZ,WAAW,CAACU,IAAI,CAAC,CAAC,CAAC,EAAE,CACpEG,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,CAAEC,IAAI,CAAEL,MAAO,CAAC,CAAE,EAAE,CAAEA,MAAM,CAAC,CACxD,CACF,CAAC,CAED,mBACExB,KAAA,QAAK8B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjC,IAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B/B,KAAA,SAAMgC,QAAQ,CAAEZ,YAAa,CAACU,SAAS,CAAC,aAAa,CAAAC,QAAA,eACnDjC,IAAA,UACEmC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,sBAAsB,CAClCC,KAAK,CAAEtB,WAAY,CACnBuB,QAAQ,CAAGf,CAAC,EAAKP,cAAc,CAACO,CAAC,CAACgB,MAAM,CAACF,KAAK,CAAE,CAChDL,SAAS,CAAC,cAAc,CACzB,CAAC,cACFhC,IAAA,WAAQmC,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC3D,CAAC,CACJ,CAAC,cAENjC,IAAA,QAAKgC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BpB,OAAO,cACNb,IAAA,QAAKgC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,cAAY,CAAK,CAAC,cAE3C/B,KAAA,CAAAE,SAAA,EAAA6B,QAAA,EACG1B,KAAK,eACJP,IAAA,OAAIgC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC1BtB,aAAa,CAAC6B,MAAM,CAAG,CAAC,CACrB,uBAAuBjC,KAAK,GAAG,CAC/B,yBAAyBA,KAAK,GAAG,CACnC,CACL,CAEAI,aAAa,CAAC6B,MAAM,CAAG,CAAC,cACvBxC,IAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxBtB,aAAa,CAAC8B,GAAG,CAACC,KAAK,eACtB1C,IAAA,CAACH,SAAS,EAAgB6C,KAAK,CAAEA,KAAM,EAAvBA,KAAK,CAACC,EAAmB,CAC1C,CAAC,CACC,CAAC,CACJ,CAAC9B,OAAO,EAAIN,KAAK,eACnBL,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,MAAAiC,QAAA,CAAG,uCAAqC,CAAG,CAAC,cAC5CjC,IAAA,MAAAiC,QAAA,CAAG,gDAA8C,CAAG,CAAC,EAClD,CACN,EACD,CACH,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5B,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}