{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\.cursor-tutor\\\\netflix-clone\\\\src\\\\components\\\\WatchParty.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\nimport watchPartyService from '../services/watchPartyService';\nimport './WatchParty.css';\n\n// Main component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WatchParty = ({\n  movieId,\n  videoRef,\n  isHost = true\n}) => {\n  _s();\n  const [partyCode, setPartyCode] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [participants, setParticipants] = useState([{\n    id: 1,\n    username: 'You (Host)',\n    isHost: true,\n    isSelf: true\n  }]);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [messageInput, setMessageInput] = useState('');\n  const [showChat, setShowChat] = useState(true);\n  const [micEnabled, setMicEnabled] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [currentReaction, setCurrentReaction] = useState(null);\n  const chatContainerRef = useRef(null);\n  const chatInputRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Common emojis for reactions\n  const commonEmojis = ['👍', '❤️', '😂', '😮', '😢', '👏', '🔥', '🤔'];\n\n  // Generate a random party code on mount and initialize watch party\n  useEffect(() => {\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n    setPartyCode(randomCode);\n\n    // Initialize watch party connection\n    initializeWatchParty(randomCode);\n    return () => {\n      // Clean up watch party connection on unmount\n      watchPartyService.disconnect();\n    };\n  }, []);\n\n  // Auto-scroll chat to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  // Set up video event listeners\n  useEffect(() => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Add event listeners to the video player\n        player.addEventListener('play', handlePlay);\n        player.addEventListener('pause', handlePause);\n        player.addEventListener('seeked', handleSeek);\n        return () => {\n          // Remove event listeners when component unmounts\n          player.removeEventListener('play', handlePlay);\n          player.removeEventListener('pause', handlePause);\n          player.removeEventListener('seeked', handleSeek);\n        };\n      }\n    }\n  }, [videoRef, isConnected]);\n\n  // Initialize watch party\n  const initializeWatchParty = roomCode => {\n    console.log('Initializing watch party with code:', roomCode);\n\n    // Set up event handlers\n    watchPartyService.on('onUserJoined', handleUserJoined);\n    watchPartyService.on('onUserLeft', handleUserLeft);\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\n    watchPartyService.on('onChatMessage', handleChatMessage);\n    watchPartyService.on('onReaction', handleReaction);\n    watchPartyService.on('onConnectionChange', connected => {\n      console.log('Connection status changed:', connected);\n      setIsConnected(connected);\n    });\n    watchPartyService.on('onError', error => console.error('Watch party error:', error));\n\n    // Connect to watch party\n    const connected = watchPartyService.connect(roomCode, 'You (Host)', isHost);\n    console.log('Connected to watch party:', connected);\n\n    // Set connected state immediately to allow chat functionality\n    setIsConnected(true);\n\n    // Add welcome message\n    setChatMessages([{\n      id: `system-welcome`,\n      type: 'system',\n      content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\n      timestamp: new Date().toISOString()\n    }]);\n  };\n\n  // Handle user joined event\n  const handleUserJoined = data => {\n    // Add user to participants list if they're not already in it\n    if (!participants.some(p => p.username === data.username)) {\n      setParticipants(prev => [...prev, {\n        id: data.userId,\n        username: data.username,\n        isHost: data.isHost,\n        isSelf: false\n      }]);\n\n      // Add system message to chat\n      setChatMessages(prev => [...prev, {\n        id: `system-${Date.now()}`,\n        type: 'system',\n        content: `${data.username} joined the watch party`,\n        timestamp: data.timestamp\n      }]);\n    }\n  };\n\n  // Handle user left event\n  const handleUserLeft = data => {\n    // Remove user from participants list\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\n\n    // Add system message to chat\n    setChatMessages(prev => [...prev, {\n      id: `system-${Date.now()}`,\n      type: 'system',\n      content: `${data.username} left the watch party`,\n      timestamp: data.timestamp\n    }]);\n  };\n\n  // Handle playback update event\n  const handlePlaybackUpdate = data => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Update video playback state\n        if (data.action === 'play') {\n          player.play();\n        } else if (data.action === 'pause') {\n          player.pause();\n        } else if (data.action === 'seek') {\n          player.currentTime = data.currentTime;\n        }\n\n        // Add system message to chat\n        setChatMessages(prev => [...prev, {\n          id: `system-${Date.now()}`,\n          type: 'system',\n          content: `${data.username} ${data.action}ed the video`,\n          timestamp: data.timestamp\n        }]);\n      }\n    }\n  };\n\n  // Handle chat message event\n  const handleChatMessage = data => {\n    setChatMessages(prev => [...prev, {\n      id: data.messageId,\n      type: 'message',\n      sender: data.username,\n      content: data.message,\n      timestamp: data.timestamp\n    }]);\n  };\n\n  // Handle reaction event\n  const handleReaction = data => {\n    // Show reaction animation\n    setCurrentReaction({\n      emoji: data.emoji,\n      username: data.username,\n      timestamp: Date.now()\n    });\n\n    // Hide reaction after 2 seconds\n    setTimeout(() => {\n      setCurrentReaction(null);\n    }, 2000);\n  };\n\n  // Handle video playback events\n  const handlePlay = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\n    }\n  };\n  const handlePause = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\n    }\n  };\n  const handleSeek = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\n    }\n  };\n\n  // Handle chat input\n  const handleChatSubmit = e => {\n    e.preventDefault();\n    console.log('Chat submit triggered');\n\n    // Always allow sending messages even if connection status is uncertain\n    if (messageInput.trim()) {\n      try {\n        console.log('Sending chat message:', messageInput);\n\n        // Send the message through the service if connected\n        if (isConnected) {\n          watchPartyService.sendChatMessage(messageInput);\n        } else {\n          console.log('Not connected, but still adding message to local state');\n        }\n\n        // Always add the message to our local state immediately\n        setChatMessages(prev => [...prev, {\n          id: `msg-${Date.now()}`,\n          type: 'message',\n          sender: 'You (Host)',\n          content: messageInput,\n          timestamp: new Date().toISOString()\n        }]);\n\n        // Clear the input field\n        setMessageInput('');\n\n        // Force connection if not already connected\n        if (!isConnected) {\n          console.log('Attempting to reconnect...');\n          const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n          initializeWatchParty(randomCode);\n        }\n      } catch (error) {\n        console.error('Error sending chat message:', error);\n        alert('Failed to send message. Please try again.');\n      }\n    } else {\n      console.log('Cannot send empty message');\n    }\n  };\n\n  // Handle reaction click\n  const handleReactionClick = emoji => {\n    if (isConnected) {\n      watchPartyService.sendReaction(emoji);\n    }\n    setShowEmojiPicker(false);\n  };\n\n  // Copy party code to clipboard\n  const copyPartyCode = () => {\n    navigator.clipboard.writeText(partyCode);\n    alert(`Party code ${partyCode} copied to clipboard!`);\n  };\n\n  // Format timestamp\n  const formatTimestamp = timestamp => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Toggle microphone\n  const toggleMicrophone = () => {\n    setMicEnabled(!micEnabled);\n    // In a real implementation, this would enable/disable the user's microphone\n  };\n\n  // Add a function to focus the chat input\n  const focusChatInput = () => {\n    if (chatInputRef.current) {\n      chatInputRef.current.focus();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"watch-party-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"party-info-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-info\",\n        children: [/*#__PURE__*/_jsxDEV(FaUsers, {\n          className: \"party-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Watch Party\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"party-code\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: partyCode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"copy-button\",\n            onClick: copyPartyCode,\n            children: /*#__PURE__*/_jsxDEV(FaCopy, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${showChat ? 'active' : ''}`,\n          onClick: () => setShowChat(!showChat),\n          children: /*#__PURE__*/_jsxDEV(FaComments, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${micEnabled ? 'active' : ''}`,\n          onClick: toggleMicrophone,\n          children: micEnabled ? /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-button invite-button\",\n          onClick: () => alert(`Invite your friends using code: ${partyCode}`),\n          children: [/*#__PURE__*/_jsxDEV(FaUserPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Invite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this), showChat && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-sidebar\",\n      onClick: e => {\n        // Prevent clicks in the chat sidebar from affecting the video player\n        e.stopPropagation();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"participants-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Participants (\", participants.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"participants-list\",\n          children: participants.map(participant => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"participant\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `participant-name ${participant.isHost ? 'host' : ''}`,\n              children: [participant.username, participant.isHost && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"host-badge\",\n                children: \"Host\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 19\n            }, this)\n          }, participant.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          ref: chatContainerRef,\n          onClick: e => e.stopPropagation(),\n          children: chatMessages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `chat-message ${message.type === 'system' ? 'system-message' : ''}`,\n            children: [message.type === 'message' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-sender\",\n                children: message.sender\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: formatTimestamp(message.timestamp)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 19\n            }, this)]\n          }, message.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"chat-input-form\",\n          onSubmit: handleChatSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-input-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: messageInput,\n              onChange: e => {\n                console.log('Input changed:', e.target.value);\n                setMessageInput(e.target.value);\n              },\n              placeholder: \"Type a message...\",\n              className: \"chat-input\",\n              autoComplete: \"off\",\n              ref: chatInputRef,\n              onClick: e => {\n                e.stopPropagation();\n                focusChatInput();\n              },\n              onKeyDown: e => {\n                console.log('Key pressed:', e.key);\n                if (e.key === 'Enter' && !e.shiftKey) {\n                  e.preventDefault();\n                  handleChatSubmit(e);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"emoji-button\",\n              onClick: () => setShowEmojiPicker(!showEmojiPicker),\n              children: /*#__PURE__*/_jsxDEV(FaSmile, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"emoji-picker\",\n              children: commonEmojis.map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"emoji\",\n                onClick: () => handleReactionClick(emoji),\n                children: emoji\n              }, emoji, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"send-button\",\n            onClick: handleChatSubmit,\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this), currentReaction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reaction-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-emoji\",\n        children: currentReaction.emoji\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-username\",\n        children: currentReaction.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 302,\n    columnNumber: 5\n  }, this);\n};\n_s(WatchParty, \"kzcRBHPb2McbwZVzyTBFflaFBBc=\", false, function () {\n  return [useNavigate];\n});\n_c = WatchParty;\nexport default WatchParty;\nvar _c;\n$RefreshReg$(_c, \"WatchParty\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","FaUsers","FaCopy","FaUserPlus","FaComments","FaMicrophone","FaMicrophoneSlash","FaSmile","watchPartyService","jsxDEV","_jsxDEV","WatchParty","movieId","videoRef","isHost","_s","partyCode","setPartyCode","isConnected","setIsConnected","participants","setParticipants","id","username","isSelf","chatMessages","setChatMessages","messageInput","setMessageInput","showChat","setShowChat","micEnabled","setMicEnabled","showEmojiPicker","setShowEmojiPicker","currentReaction","setCurrentReaction","chatContainerRef","chatInputRef","navigate","commonEmojis","randomCode","Math","random","toString","substring","toUpperCase","initializeWatchParty","disconnect","current","scrollTop","scrollHeight","player","getInternalPlayer","addEventListener","handlePlay","handlePause","handleSeek","removeEventListener","roomCode","console","log","on","handleUserJoined","handleUserLeft","handlePlaybackUpdate","handleChatMessage","handleReaction","connected","error","connect","type","content","timestamp","Date","toISOString","data","some","p","prev","userId","now","filter","action","play","pause","currentTime","messageId","sender","message","emoji","setTimeout","sendPlaybackUpdate","getCurrentTime","handleChatSubmit","e","preventDefault","trim","sendChatMessage","alert","handleReactionClick","sendReaction","copyPartyCode","navigator","clipboard","writeText","formatTimestamp","date","toLocaleTimeString","hour","minute","toggleMicrophone","focusChatInput","focus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","stopPropagation","length","map","participant","ref","onSubmit","value","onChange","target","placeholder","autoComplete","onKeyDown","key","shiftKey","_c","$RefreshReg$"],"sources":["C:/Users/hp/.cursor-tutor/netflix-clone/src/components/WatchParty.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\nimport watchPartyService from '../services/watchPartyService';\nimport './WatchParty.css';\n\n// Main component\nconst WatchParty = ({ movieId, videoRef, isHost = true }) => {\n  const [partyCode, setPartyCode] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [participants, setParticipants] = useState([\n    { id: 1, username: 'You (Host)', isHost: true, isSelf: true }\n  ]);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [messageInput, setMessageInput] = useState('');\n  const [showChat, setShowChat] = useState(true);\n  const [micEnabled, setMicEnabled] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [currentReaction, setCurrentReaction] = useState(null);\n  \n  const chatContainerRef = useRef(null);\n  const chatInputRef = useRef(null);\n  const navigate = useNavigate();\n  \n  // Common emojis for reactions\n  const commonEmojis = ['👍', '❤️', '😂', '😮', '😢', '👏', '🔥', '🤔'];\n  \n  // Generate a random party code on mount and initialize watch party\n  useEffect(() => {\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n    setPartyCode(randomCode);\n    \n    // Initialize watch party connection\n    initializeWatchParty(randomCode);\n    \n    return () => {\n      // Clean up watch party connection on unmount\n      watchPartyService.disconnect();\n    };\n  }, []);\n  \n  // Auto-scroll chat to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n  \n  // Set up video event listeners\n  useEffect(() => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      \n      if (player) {\n        // Add event listeners to the video player\n        player.addEventListener('play', handlePlay);\n        player.addEventListener('pause', handlePause);\n        player.addEventListener('seeked', handleSeek);\n        \n        return () => {\n          // Remove event listeners when component unmounts\n          player.removeEventListener('play', handlePlay);\n          player.removeEventListener('pause', handlePause);\n          player.removeEventListener('seeked', handleSeek);\n        };\n      }\n    }\n  }, [videoRef, isConnected]);\n  \n  // Initialize watch party\n  const initializeWatchParty = (roomCode) => {\n    console.log('Initializing watch party with code:', roomCode);\n    \n    // Set up event handlers\n    watchPartyService.on('onUserJoined', handleUserJoined);\n    watchPartyService.on('onUserLeft', handleUserLeft);\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\n    watchPartyService.on('onChatMessage', handleChatMessage);\n    watchPartyService.on('onReaction', handleReaction);\n    watchPartyService.on('onConnectionChange', (connected) => {\n      console.log('Connection status changed:', connected);\n      setIsConnected(connected);\n    });\n    watchPartyService.on('onError', (error) => console.error('Watch party error:', error));\n    \n    // Connect to watch party\n    const connected = watchPartyService.connect(roomCode, 'You (Host)', isHost);\n    console.log('Connected to watch party:', connected);\n    \n    // Set connected state immediately to allow chat functionality\n    setIsConnected(true);\n    \n    // Add welcome message\n    setChatMessages([\n      {\n        id: `system-welcome`,\n        type: 'system',\n        content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\n        timestamp: new Date().toISOString()\n      }\n    ]);\n  };\n  \n  // Handle user joined event\n  const handleUserJoined = (data) => {\n    // Add user to participants list if they're not already in it\n    if (!participants.some(p => p.username === data.username)) {\n      setParticipants(prev => [\n        ...prev,\n        { id: data.userId, username: data.username, isHost: data.isHost, isSelf: false }\n      ]);\n      \n      // Add system message to chat\n      setChatMessages(prev => [\n        ...prev,\n        {\n          id: `system-${Date.now()}`,\n          type: 'system',\n          content: `${data.username} joined the watch party`,\n          timestamp: data.timestamp\n        }\n      ]);\n    }\n  };\n  \n  // Handle user left event\n  const handleUserLeft = (data) => {\n    // Remove user from participants list\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\n    \n    // Add system message to chat\n    setChatMessages(prev => [\n      ...prev,\n      {\n        id: `system-${Date.now()}`,\n        type: 'system',\n        content: `${data.username} left the watch party`,\n        timestamp: data.timestamp\n      }\n    ]);\n  };\n  \n  // Handle playback update event\n  const handlePlaybackUpdate = (data) => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      \n      if (player) {\n        // Update video playback state\n        if (data.action === 'play') {\n          player.play();\n        } else if (data.action === 'pause') {\n          player.pause();\n        } else if (data.action === 'seek') {\n          player.currentTime = data.currentTime;\n        }\n        \n        // Add system message to chat\n        setChatMessages(prev => [\n          ...prev,\n          {\n            id: `system-${Date.now()}`,\n            type: 'system',\n            content: `${data.username} ${data.action}ed the video`,\n            timestamp: data.timestamp\n          }\n        ]);\n      }\n    }\n  };\n  \n  // Handle chat message event\n  const handleChatMessage = (data) => {\n    setChatMessages(prev => [\n      ...prev,\n      {\n        id: data.messageId,\n        type: 'message',\n        sender: data.username,\n        content: data.message,\n        timestamp: data.timestamp\n      }\n    ]);\n  };\n  \n  // Handle reaction event\n  const handleReaction = (data) => {\n    // Show reaction animation\n    setCurrentReaction({\n      emoji: data.emoji,\n      username: data.username,\n      timestamp: Date.now()\n    });\n    \n    // Hide reaction after 2 seconds\n    setTimeout(() => {\n      setCurrentReaction(null);\n    }, 2000);\n  };\n  \n  // Handle video playback events\n  const handlePlay = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\n    }\n  };\n  \n  const handlePause = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\n    }\n  };\n  \n  const handleSeek = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\n    }\n  };\n  \n  // Handle chat input\n  const handleChatSubmit = (e) => {\n    e.preventDefault();\n    console.log('Chat submit triggered');\n    \n    // Always allow sending messages even if connection status is uncertain\n    if (messageInput.trim()) {\n      try {\n        console.log('Sending chat message:', messageInput);\n        \n        // Send the message through the service if connected\n        if (isConnected) {\n          watchPartyService.sendChatMessage(messageInput);\n        } else {\n          console.log('Not connected, but still adding message to local state');\n        }\n        \n        // Always add the message to our local state immediately\n        setChatMessages(prev => [\n          ...prev,\n          {\n            id: `msg-${Date.now()}`,\n            type: 'message',\n            sender: 'You (Host)',\n            content: messageInput,\n            timestamp: new Date().toISOString()\n          }\n        ]);\n        \n        // Clear the input field\n        setMessageInput('');\n        \n        // Force connection if not already connected\n        if (!isConnected) {\n          console.log('Attempting to reconnect...');\n          const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n          initializeWatchParty(randomCode);\n        }\n      } catch (error) {\n        console.error('Error sending chat message:', error);\n        alert('Failed to send message. Please try again.');\n      }\n    } else {\n      console.log('Cannot send empty message');\n    }\n  };\n  \n  // Handle reaction click\n  const handleReactionClick = (emoji) => {\n    if (isConnected) {\n      watchPartyService.sendReaction(emoji);\n    }\n    \n    setShowEmojiPicker(false);\n  };\n  \n  // Copy party code to clipboard\n  const copyPartyCode = () => {\n    navigator.clipboard.writeText(partyCode);\n    alert(`Party code ${partyCode} copied to clipboard!`);\n  };\n  \n  // Format timestamp\n  const formatTimestamp = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n  \n  // Toggle microphone\n  const toggleMicrophone = () => {\n    setMicEnabled(!micEnabled);\n    // In a real implementation, this would enable/disable the user's microphone\n  };\n  \n  // Add a function to focus the chat input\n  const focusChatInput = () => {\n    if (chatInputRef.current) {\n      chatInputRef.current.focus();\n    }\n  };\n  \n  return (\n    <div className=\"watch-party-container\">\n      {/* Party info bar */}\n      <div className=\"party-info-bar\">\n        <div className=\"party-info\">\n          <FaUsers className=\"party-icon\" />\n          <span>Watch Party</span>\n          <div className=\"party-code\">\n            <span>{partyCode}</span>\n            <button className=\"copy-button\" onClick={copyPartyCode}>\n              <FaCopy />\n            </button>\n          </div>\n        </div>\n        <div className=\"party-controls\">\n          <button \n            className={`control-button ${showChat ? 'active' : ''}`}\n            onClick={() => setShowChat(!showChat)}\n          >\n            <FaComments />\n          </button>\n          <button \n            className={`control-button ${micEnabled ? 'active' : ''}`}\n            onClick={toggleMicrophone}\n          >\n            {micEnabled ? <FaMicrophone /> : <FaMicrophoneSlash />}\n          </button>\n          <button \n            className=\"control-button invite-button\"\n            onClick={() => alert(`Invite your friends using code: ${partyCode}`)}\n          >\n            <FaUserPlus />\n            <span>Invite</span>\n          </button>\n        </div>\n      </div>\n      \n      {/* Chat sidebar */}\n      {showChat && (\n        <div \n          className=\"chat-sidebar\" \n          onClick={(e) => {\n            // Prevent clicks in the chat sidebar from affecting the video player\n            e.stopPropagation();\n          }}\n        >\n          <div className=\"participants-section\">\n            <h3>Participants ({participants.length})</h3>\n            <ul className=\"participants-list\">\n              {participants.map(participant => (\n                <li key={participant.id} className=\"participant\">\n                  <span className={`participant-name ${participant.isHost ? 'host' : ''}`}>\n                    {participant.username}\n                    {participant.isHost && <span className=\"host-badge\">Host</span>}\n                  </span>\n                </li>\n              ))}\n            </ul>\n          </div>\n          \n          <div className=\"chat-section\">\n            <h3>Chat</h3>\n            <div \n              className=\"chat-messages\" \n              ref={chatContainerRef}\n              onClick={(e) => e.stopPropagation()}\n            >\n              {chatMessages.map(message => (\n                <div \n                  key={message.id} \n                  className={`chat-message ${message.type === 'system' ? 'system-message' : ''}`}\n                >\n                  {message.type === 'message' && (\n                    <div className=\"message-header\">\n                      <span className=\"message-sender\">{message.sender}</span>\n                      <span className=\"message-time\">{formatTimestamp(message.timestamp)}</span>\n                    </div>\n                  )}\n                  <div className=\"message-content\">{message.content}</div>\n                </div>\n              ))}\n            </div>\n            \n            <form className=\"chat-input-form\" onSubmit={handleChatSubmit}>\n              <div className=\"chat-input-container\">\n                <input\n                  type=\"text\"\n                  value={messageInput}\n                  onChange={(e) => {\n                    console.log('Input changed:', e.target.value);\n                    setMessageInput(e.target.value);\n                  }}\n                  placeholder=\"Type a message...\"\n                  className=\"chat-input\"\n                  autoComplete=\"off\"\n                  ref={chatInputRef}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    focusChatInput();\n                  }}\n                  onKeyDown={(e) => {\n                    console.log('Key pressed:', e.key);\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleChatSubmit(e);\n                    }\n                  }}\n                />\n                <button \n                  type=\"button\" \n                  className=\"emoji-button\"\n                  onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n                >\n                  <FaSmile />\n                </button>\n                {showEmojiPicker && (\n                  <div className=\"emoji-picker\">\n                    {commonEmojis.map(emoji => (\n                      <button\n                        key={emoji}\n                        type=\"button\"\n                        className=\"emoji\"\n                        onClick={() => handleReactionClick(emoji)}\n                      >\n                        {emoji}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n              <button \n                type=\"button\" \n                className=\"send-button\"\n                onClick={handleChatSubmit}\n              >\n                Send\n              </button>\n            </form>\n          </div>\n        </div>\n      )}\n      \n      {/* Reaction display */}\n      {currentReaction && (\n        <div className=\"reaction-display\">\n          <div className=\"reaction-emoji\">{currentReaction.emoji}</div>\n          <div className=\"reaction-username\">{currentReaction.username}</div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WatchParty; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}