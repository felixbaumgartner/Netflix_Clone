{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\.cursor-tutor\\\\netflix-clone\\\\src\\\\components\\\\WatchParty.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\nimport watchPartyService from '../services/watchPartyService';\nimport './WatchParty.css';\n\n// Main component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WatchParty = ({\n  movieId,\n  videoRef,\n  isHost = true\n}) => {\n  _s();\n  const [partyCode, setPartyCode] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [participants, setParticipants] = useState([{\n    id: 1,\n    username: 'You (Host)',\n    isHost: true,\n    isSelf: true\n  }]);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [messageInput, setMessageInput] = useState('');\n  const [showChat, setShowChat] = useState(true);\n  const [micEnabled, setMicEnabled] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [currentReaction, setCurrentReaction] = useState(null);\n  const chatContainerRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Common emojis for reactions\n  const commonEmojis = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘', 'ðŸ”¥', 'ðŸ¤”'];\n\n  // Generate a random party code on mount and initialize watch party\n  useEffect(() => {\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n    setPartyCode(randomCode);\n\n    // Initialize watch party connection\n    initializeWatchParty(randomCode);\n    return () => {\n      // Clean up watch party connection on unmount\n      watchPartyService.disconnect();\n    };\n  }, []);\n\n  // Auto-scroll chat to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  // Set up video event listeners\n  useEffect(() => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Add event listeners to the video player\n        player.addEventListener('play', handlePlay);\n        player.addEventListener('pause', handlePause);\n        player.addEventListener('seeked', handleSeek);\n        return () => {\n          // Remove event listeners when component unmounts\n          player.removeEventListener('play', handlePlay);\n          player.removeEventListener('pause', handlePause);\n          player.removeEventListener('seeked', handleSeek);\n        };\n      }\n    }\n  }, [videoRef, isConnected]);\n\n  // Initialize watch party\n  const initializeWatchParty = roomCode => {\n    // Set up event handlers\n    watchPartyService.on('onUserJoined', handleUserJoined);\n    watchPartyService.on('onUserLeft', handleUserLeft);\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\n    watchPartyService.on('onChatMessage', handleChatMessage);\n    watchPartyService.on('onReaction', handleReaction);\n    watchPartyService.on('onConnectionChange', connected => setIsConnected(connected));\n    watchPartyService.on('onError', error => console.error('Watch party error:', error));\n\n    // Connect to watch party\n    watchPartyService.connect(roomCode, 'You (Host)', isHost);\n\n    // Add welcome message\n    setChatMessages([{\n      id: `system-welcome`,\n      type: 'system',\n      content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\n      timestamp: new Date().toISOString()\n    }]);\n  };\n\n  // Handle user joined event\n  const handleUserJoined = data => {\n    // Add user to participants list if they're not already in it\n    if (!participants.some(p => p.username === data.username)) {\n      setParticipants(prev => [...prev, {\n        id: data.userId,\n        username: data.username,\n        isHost: data.isHost,\n        isSelf: false\n      }]);\n\n      // Add system message to chat\n      setChatMessages(prev => [...prev, {\n        id: `system-${Date.now()}`,\n        type: 'system',\n        content: `${data.username} joined the watch party`,\n        timestamp: data.timestamp\n      }]);\n    }\n  };\n\n  // Handle user left event\n  const handleUserLeft = data => {\n    // Remove user from participants list\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\n\n    // Add system message to chat\n    setChatMessages(prev => [...prev, {\n      id: `system-${Date.now()}`,\n      type: 'system',\n      content: `${data.username} left the watch party`,\n      timestamp: data.timestamp\n    }]);\n  };\n\n  // Handle playback update event\n  const handlePlaybackUpdate = data => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Update video playback state\n        if (data.action === 'play') {\n          player.play();\n        } else if (data.action === 'pause') {\n          player.pause();\n        } else if (data.action === 'seek') {\n          player.currentTime = data.currentTime;\n        }\n\n        // Add system message to chat\n        setChatMessages(prev => [...prev, {\n          id: `system-${Date.now()}`,\n          type: 'system',\n          content: `${data.username} ${data.action}ed the video`,\n          timestamp: data.timestamp\n        }]);\n      }\n    }\n  };\n\n  // Handle chat message event\n  const handleChatMessage = data => {\n    setChatMessages(prev => [...prev, {\n      id: data.messageId,\n      type: 'message',\n      sender: data.username,\n      content: data.message,\n      timestamp: data.timestamp\n    }]);\n  };\n\n  // Handle reaction event\n  const handleReaction = data => {\n    // Show reaction animation\n    setCurrentReaction({\n      emoji: data.emoji,\n      username: data.username,\n      timestamp: Date.now()\n    });\n\n    // Hide reaction after 2 seconds\n    setTimeout(() => {\n      setCurrentReaction(null);\n    }, 2000);\n  };\n\n  // Handle video playback events\n  const handlePlay = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\n    }\n  };\n  const handlePause = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\n    }\n  };\n  const handleSeek = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\n    }\n  };\n\n  // Handle chat input\n  const handleChatSubmit = e => {\n    e.preventDefault();\n    if (messageInput.trim() && isConnected) {\n      // Send the message through the service\n      watchPartyService.sendChatMessage(messageInput);\n\n      // Also add the message to our local state immediately\n      setChatMessages(prev => [...prev, {\n        id: `msg-${Date.now()}`,\n        type: 'message',\n        sender: 'You (Host)',\n        content: messageInput,\n        timestamp: new Date().toISOString()\n      }]);\n\n      // Clear the input field\n      setMessageInput('');\n    }\n  };\n\n  // Handle reaction click\n  const handleReactionClick = emoji => {\n    if (isConnected) {\n      watchPartyService.sendReaction(emoji);\n    }\n    setShowEmojiPicker(false);\n  };\n\n  // Copy party code to clipboard\n  const copyPartyCode = () => {\n    navigator.clipboard.writeText(partyCode);\n    alert(`Party code ${partyCode} copied to clipboard!`);\n  };\n\n  // Format timestamp\n  const formatTimestamp = timestamp => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Toggle microphone\n  const toggleMicrophone = () => {\n    setMicEnabled(!micEnabled);\n    // In a real implementation, this would enable/disable the user's microphone\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"watch-party-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"party-info-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-info\",\n        children: [/*#__PURE__*/_jsxDEV(FaUsers, {\n          className: \"party-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Watch Party\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"party-code\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: partyCode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"copy-button\",\n            onClick: copyPartyCode,\n            children: /*#__PURE__*/_jsxDEV(FaCopy, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${showChat ? 'active' : ''}`,\n          onClick: () => setShowChat(!showChat),\n          children: /*#__PURE__*/_jsxDEV(FaComments, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${micEnabled ? 'active' : ''}`,\n          onClick: toggleMicrophone,\n          children: micEnabled ? /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-button invite-button\",\n          onClick: () => alert(`Invite your friends using code: ${partyCode}`),\n          children: [/*#__PURE__*/_jsxDEV(FaUserPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Invite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), showChat && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"participants-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Participants (\", participants.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"participants-list\",\n          children: participants.map(participant => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"participant\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `participant-name ${participant.isHost ? 'host' : ''}`,\n              children: [participant.username, participant.isHost && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"host-badge\",\n                children: \"Host\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 19\n            }, this)\n          }, participant.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          ref: chatContainerRef,\n          children: chatMessages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `chat-message ${message.type === 'system' ? 'system-message' : ''}`,\n            children: [message.type === 'message' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-sender\",\n                children: message.sender\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: formatTimestamp(message.timestamp)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 19\n            }, this)]\n          }, message.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"chat-input-form\",\n          onSubmit: handleChatSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-input-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: messageInput,\n              onChange: e => setMessageInput(e.target.value),\n              placeholder: \"Type a message...\",\n              className: \"chat-input\",\n              autoComplete: \"off\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"emoji-button\",\n              onClick: () => setShowEmojiPicker(!showEmojiPicker),\n              children: /*#__PURE__*/_jsxDEV(FaSmile, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"emoji-picker\",\n              children: commonEmojis.map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"emoji\",\n                onClick: () => handleReactionClick(emoji),\n                children: emoji\n              }, emoji, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"send-button\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 9\n    }, this), currentReaction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reaction-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-emoji\",\n        children: currentReaction.emoji\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-username\",\n        children: currentReaction.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 263,\n    columnNumber: 5\n  }, this);\n};\n_s(WatchParty, \"ilZnxnA/FHJ6jwNLDltxwmqXG48=\", false, function () {\n  return [useNavigate];\n});\n_c = WatchParty;\nexport default WatchParty;\nvar _c;\n$RefreshReg$(_c, \"WatchParty\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","FaUsers","FaCopy","FaUserPlus","FaComments","FaMicrophone","FaMicrophoneSlash","FaSmile","watchPartyService","jsxDEV","_jsxDEV","WatchParty","movieId","videoRef","isHost","_s","partyCode","setPartyCode","isConnected","setIsConnected","participants","setParticipants","id","username","isSelf","chatMessages","setChatMessages","messageInput","setMessageInput","showChat","setShowChat","micEnabled","setMicEnabled","showEmojiPicker","setShowEmojiPicker","currentReaction","setCurrentReaction","chatContainerRef","navigate","commonEmojis","randomCode","Math","random","toString","substring","toUpperCase","initializeWatchParty","disconnect","current","scrollTop","scrollHeight","player","getInternalPlayer","addEventListener","handlePlay","handlePause","handleSeek","removeEventListener","roomCode","on","handleUserJoined","handleUserLeft","handlePlaybackUpdate","handleChatMessage","handleReaction","connected","error","console","connect","type","content","timestamp","Date","toISOString","data","some","p","prev","userId","now","filter","action","play","pause","currentTime","messageId","sender","message","emoji","setTimeout","sendPlaybackUpdate","getCurrentTime","handleChatSubmit","e","preventDefault","trim","sendChatMessage","handleReactionClick","sendReaction","copyPartyCode","navigator","clipboard","writeText","alert","formatTimestamp","date","toLocaleTimeString","hour","minute","toggleMicrophone","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","map","participant","ref","onSubmit","value","onChange","target","placeholder","autoComplete","_c","$RefreshReg$"],"sources":["C:/Users/hp/.cursor-tutor/netflix-clone/src/components/WatchParty.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\r\nimport watchPartyService from '../services/watchPartyService';\r\nimport './WatchParty.css';\r\n\r\n// Main component\r\nconst WatchParty = ({ movieId, videoRef, isHost = true }) => {\r\n  const [partyCode, setPartyCode] = useState('');\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [participants, setParticipants] = useState([\r\n    { id: 1, username: 'You (Host)', isHost: true, isSelf: true }\r\n  ]);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [messageInput, setMessageInput] = useState('');\r\n  const [showChat, setShowChat] = useState(true);\r\n  const [micEnabled, setMicEnabled] = useState(false);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [currentReaction, setCurrentReaction] = useState(null);\r\n  \r\n  const chatContainerRef = useRef(null);\r\n  const navigate = useNavigate();\r\n  \r\n  // Common emojis for reactions\r\n  const commonEmojis = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘', 'ðŸ”¥', 'ðŸ¤”'];\r\n  \r\n  // Generate a random party code on mount and initialize watch party\r\n  useEffect(() => {\r\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\r\n    setPartyCode(randomCode);\r\n    \r\n    // Initialize watch party connection\r\n    initializeWatchParty(randomCode);\r\n    \r\n    return () => {\r\n      // Clean up watch party connection on unmount\r\n      watchPartyService.disconnect();\r\n    };\r\n  }, []);\r\n  \r\n  // Auto-scroll chat to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (chatContainerRef.current) {\r\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\r\n    }\r\n  }, [chatMessages]);\r\n  \r\n  // Set up video event listeners\r\n  useEffect(() => {\r\n    if (videoRef && videoRef.current) {\r\n      const player = videoRef.current.getInternalPlayer();\r\n      \r\n      if (player) {\r\n        // Add event listeners to the video player\r\n        player.addEventListener('play', handlePlay);\r\n        player.addEventListener('pause', handlePause);\r\n        player.addEventListener('seeked', handleSeek);\r\n        \r\n        return () => {\r\n          // Remove event listeners when component unmounts\r\n          player.removeEventListener('play', handlePlay);\r\n          player.removeEventListener('pause', handlePause);\r\n          player.removeEventListener('seeked', handleSeek);\r\n        };\r\n      }\r\n    }\r\n  }, [videoRef, isConnected]);\r\n  \r\n  // Initialize watch party\r\n  const initializeWatchParty = (roomCode) => {\r\n    // Set up event handlers\r\n    watchPartyService.on('onUserJoined', handleUserJoined);\r\n    watchPartyService.on('onUserLeft', handleUserLeft);\r\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\r\n    watchPartyService.on('onChatMessage', handleChatMessage);\r\n    watchPartyService.on('onReaction', handleReaction);\r\n    watchPartyService.on('onConnectionChange', (connected) => setIsConnected(connected));\r\n    watchPartyService.on('onError', (error) => console.error('Watch party error:', error));\r\n    \r\n    // Connect to watch party\r\n    watchPartyService.connect(roomCode, 'You (Host)', isHost);\r\n    \r\n    // Add welcome message\r\n    setChatMessages([\r\n      {\r\n        id: `system-welcome`,\r\n        type: 'system',\r\n        content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\r\n        timestamp: new Date().toISOString()\r\n      }\r\n    ]);\r\n  };\r\n  \r\n  // Handle user joined event\r\n  const handleUserJoined = (data) => {\r\n    // Add user to participants list if they're not already in it\r\n    if (!participants.some(p => p.username === data.username)) {\r\n      setParticipants(prev => [\r\n        ...prev,\r\n        { id: data.userId, username: data.username, isHost: data.isHost, isSelf: false }\r\n      ]);\r\n      \r\n      // Add system message to chat\r\n      setChatMessages(prev => [\r\n        ...prev,\r\n        {\r\n          id: `system-${Date.now()}`,\r\n          type: 'system',\r\n          content: `${data.username} joined the watch party`,\r\n          timestamp: data.timestamp\r\n        }\r\n      ]);\r\n    }\r\n  };\r\n  \r\n  // Handle user left event\r\n  const handleUserLeft = (data) => {\r\n    // Remove user from participants list\r\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\r\n    \r\n    // Add system message to chat\r\n    setChatMessages(prev => [\r\n      ...prev,\r\n      {\r\n        id: `system-${Date.now()}`,\r\n        type: 'system',\r\n        content: `${data.username} left the watch party`,\r\n        timestamp: data.timestamp\r\n      }\r\n    ]);\r\n  };\r\n  \r\n  // Handle playback update event\r\n  const handlePlaybackUpdate = (data) => {\r\n    if (videoRef && videoRef.current) {\r\n      const player = videoRef.current.getInternalPlayer();\r\n      \r\n      if (player) {\r\n        // Update video playback state\r\n        if (data.action === 'play') {\r\n          player.play();\r\n        } else if (data.action === 'pause') {\r\n          player.pause();\r\n        } else if (data.action === 'seek') {\r\n          player.currentTime = data.currentTime;\r\n        }\r\n        \r\n        // Add system message to chat\r\n        setChatMessages(prev => [\r\n          ...prev,\r\n          {\r\n            id: `system-${Date.now()}`,\r\n            type: 'system',\r\n            content: `${data.username} ${data.action}ed the video`,\r\n            timestamp: data.timestamp\r\n          }\r\n        ]);\r\n      }\r\n    }\r\n  };\r\n  \r\n  // Handle chat message event\r\n  const handleChatMessage = (data) => {\r\n    setChatMessages(prev => [\r\n      ...prev,\r\n      {\r\n        id: data.messageId,\r\n        type: 'message',\r\n        sender: data.username,\r\n        content: data.message,\r\n        timestamp: data.timestamp\r\n      }\r\n    ]);\r\n  };\r\n  \r\n  // Handle reaction event\r\n  const handleReaction = (data) => {\r\n    // Show reaction animation\r\n    setCurrentReaction({\r\n      emoji: data.emoji,\r\n      username: data.username,\r\n      timestamp: Date.now()\r\n    });\r\n    \r\n    // Hide reaction after 2 seconds\r\n    setTimeout(() => {\r\n      setCurrentReaction(null);\r\n    }, 2000);\r\n  };\r\n  \r\n  // Handle video playback events\r\n  const handlePlay = () => {\r\n    if (isConnected) {\r\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\r\n    }\r\n  };\r\n  \r\n  const handlePause = () => {\r\n    if (isConnected) {\r\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\r\n    }\r\n  };\r\n  \r\n  const handleSeek = () => {\r\n    if (isConnected) {\r\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\r\n    }\r\n  };\r\n  \r\n  // Handle chat input\r\n  const handleChatSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (messageInput.trim() && isConnected) {\r\n      // Send the message through the service\r\n      watchPartyService.sendChatMessage(messageInput);\r\n      \r\n      // Also add the message to our local state immediately\r\n      setChatMessages(prev => [\r\n        ...prev,\r\n        {\r\n          id: `msg-${Date.now()}`,\r\n          type: 'message',\r\n          sender: 'You (Host)',\r\n          content: messageInput,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      ]);\r\n      \r\n      // Clear the input field\r\n      setMessageInput('');\r\n    }\r\n  };\r\n  \r\n  // Handle reaction click\r\n  const handleReactionClick = (emoji) => {\r\n    if (isConnected) {\r\n      watchPartyService.sendReaction(emoji);\r\n    }\r\n    \r\n    setShowEmojiPicker(false);\r\n  };\r\n  \r\n  // Copy party code to clipboard\r\n  const copyPartyCode = () => {\r\n    navigator.clipboard.writeText(partyCode);\r\n    alert(`Party code ${partyCode} copied to clipboard!`);\r\n  };\r\n  \r\n  // Format timestamp\r\n  const formatTimestamp = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n  \r\n  // Toggle microphone\r\n  const toggleMicrophone = () => {\r\n    setMicEnabled(!micEnabled);\r\n    // In a real implementation, this would enable/disable the user's microphone\r\n  };\r\n  \r\n  return (\r\n    <div className=\"watch-party-container\">\r\n      {/* Party info bar */}\r\n      <div className=\"party-info-bar\">\r\n        <div className=\"party-info\">\r\n          <FaUsers className=\"party-icon\" />\r\n          <span>Watch Party</span>\r\n          <div className=\"party-code\">\r\n            <span>{partyCode}</span>\r\n            <button className=\"copy-button\" onClick={copyPartyCode}>\r\n              <FaCopy />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"party-controls\">\r\n          <button \r\n            className={`control-button ${showChat ? 'active' : ''}`}\r\n            onClick={() => setShowChat(!showChat)}\r\n          >\r\n            <FaComments />\r\n          </button>\r\n          <button \r\n            className={`control-button ${micEnabled ? 'active' : ''}`}\r\n            onClick={toggleMicrophone}\r\n          >\r\n            {micEnabled ? <FaMicrophone /> : <FaMicrophoneSlash />}\r\n          </button>\r\n          <button \r\n            className=\"control-button invite-button\"\r\n            onClick={() => alert(`Invite your friends using code: ${partyCode}`)}\r\n          >\r\n            <FaUserPlus />\r\n            <span>Invite</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Chat sidebar */}\r\n      {showChat && (\r\n        <div className=\"chat-sidebar\">\r\n          <div className=\"participants-section\">\r\n            <h3>Participants ({participants.length})</h3>\r\n            <ul className=\"participants-list\">\r\n              {participants.map(participant => (\r\n                <li key={participant.id} className=\"participant\">\r\n                  <span className={`participant-name ${participant.isHost ? 'host' : ''}`}>\r\n                    {participant.username}\r\n                    {participant.isHost && <span className=\"host-badge\">Host</span>}\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          \r\n          <div className=\"chat-section\">\r\n            <h3>Chat</h3>\r\n            <div className=\"chat-messages\" ref={chatContainerRef}>\r\n              {chatMessages.map(message => (\r\n                <div \r\n                  key={message.id} \r\n                  className={`chat-message ${message.type === 'system' ? 'system-message' : ''}`}\r\n                >\r\n                  {message.type === 'message' && (\r\n                    <div className=\"message-header\">\r\n                      <span className=\"message-sender\">{message.sender}</span>\r\n                      <span className=\"message-time\">{formatTimestamp(message.timestamp)}</span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"message-content\">{message.content}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            \r\n            <form className=\"chat-input-form\" onSubmit={handleChatSubmit}>\r\n              <div className=\"chat-input-container\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={messageInput}\r\n                  onChange={(e) => setMessageInput(e.target.value)}\r\n                  placeholder=\"Type a message...\"\r\n                  className=\"chat-input\"\r\n                  autoComplete=\"off\"\r\n                />\r\n                <button \r\n                  type=\"button\" \r\n                  className=\"emoji-button\"\r\n                  onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n                >\r\n                  <FaSmile />\r\n                </button>\r\n                {showEmojiPicker && (\r\n                  <div className=\"emoji-picker\">\r\n                    {commonEmojis.map(emoji => (\r\n                      <button\r\n                        key={emoji}\r\n                        type=\"button\"\r\n                        className=\"emoji\"\r\n                        onClick={() => handleReactionClick(emoji)}\r\n                      >\r\n                        {emoji}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <button type=\"submit\" className=\"send-button\">Send</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Reaction display */}\r\n      {currentReaction && (\r\n        <div className=\"reaction-display\">\r\n          <div className=\"reaction-emoji\">{currentReaction.emoji}</div>\r\n          <div className=\"reaction-username\">{currentReaction.username}</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WatchParty; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}