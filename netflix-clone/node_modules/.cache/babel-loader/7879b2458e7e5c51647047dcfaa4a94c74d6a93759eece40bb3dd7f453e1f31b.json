{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\.cursor-tutor\\\\netflix-clone\\\\src\\\\components\\\\WatchParty.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\nimport watchPartyService from '../services/watchPartyService';\nimport './WatchParty.css';\n\n// Main component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WatchParty = ({\n  movieId,\n  videoRef,\n  isHost = true\n}) => {\n  _s();\n  const [partyCode, setPartyCode] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [participants, setParticipants] = useState([{\n    id: 1,\n    username: 'You (Host)',\n    isHost: true,\n    isSelf: true\n  }]);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [messageInput, setMessageInput] = useState('');\n  const [showChat, setShowChat] = useState(true);\n  const [micEnabled, setMicEnabled] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [currentReaction, setCurrentReaction] = useState(null);\n  const chatContainerRef = useRef(null);\n  const chatInputRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Common emojis for reactions\n  const commonEmojis = ['👍', '❤️', '😂', '😮', '😢', '👏', '🔥', '🤔'];\n\n  // Generate a random party code on mount and initialize watch party\n  useEffect(() => {\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n    setPartyCode(randomCode);\n\n    // Initialize watch party connection\n    initializeWatchParty(randomCode);\n    return () => {\n      // Clean up watch party connection on unmount\n      watchPartyService.disconnect();\n    };\n  }, []);\n\n  // Auto-scroll chat to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  // Set up video event listeners\n  useEffect(() => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Add event listeners to the video player\n        player.addEventListener('play', handlePlay);\n        player.addEventListener('pause', handlePause);\n        player.addEventListener('seeked', handleSeek);\n        return () => {\n          // Remove event listeners when component unmounts\n          player.removeEventListener('play', handlePlay);\n          player.removeEventListener('pause', handlePause);\n          player.removeEventListener('seeked', handleSeek);\n        };\n      }\n    }\n  }, [videoRef, isConnected]);\n\n  // Initialize watch party\n  const initializeWatchParty = roomCode => {\n    // Set up event handlers\n    watchPartyService.on('onUserJoined', handleUserJoined);\n    watchPartyService.on('onUserLeft', handleUserLeft);\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\n    watchPartyService.on('onChatMessage', handleChatMessage);\n    watchPartyService.on('onReaction', handleReaction);\n    watchPartyService.on('onConnectionChange', connected => setIsConnected(connected));\n    watchPartyService.on('onError', error => console.error('Watch party error:', error));\n\n    // Connect to watch party\n    watchPartyService.connect(roomCode, 'You (Host)', isHost);\n\n    // Add welcome message\n    setChatMessages([{\n      id: `system-welcome`,\n      type: 'system',\n      content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\n      timestamp: new Date().toISOString()\n    }]);\n  };\n\n  // Handle user joined event\n  const handleUserJoined = data => {\n    // Add user to participants list if they're not already in it\n    if (!participants.some(p => p.username === data.username)) {\n      setParticipants(prev => [...prev, {\n        id: data.userId,\n        username: data.username,\n        isHost: data.isHost,\n        isSelf: false\n      }]);\n\n      // Add system message to chat\n      setChatMessages(prev => [...prev, {\n        id: `system-${Date.now()}`,\n        type: 'system',\n        content: `${data.username} joined the watch party`,\n        timestamp: data.timestamp\n      }]);\n    }\n  };\n\n  // Handle user left event\n  const handleUserLeft = data => {\n    // Remove user from participants list\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\n\n    // Add system message to chat\n    setChatMessages(prev => [...prev, {\n      id: `system-${Date.now()}`,\n      type: 'system',\n      content: `${data.username} left the watch party`,\n      timestamp: data.timestamp\n    }]);\n  };\n\n  // Handle playback update event\n  const handlePlaybackUpdate = data => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Update video playback state\n        if (data.action === 'play') {\n          player.play();\n        } else if (data.action === 'pause') {\n          player.pause();\n        } else if (data.action === 'seek') {\n          player.currentTime = data.currentTime;\n        }\n\n        // Add system message to chat\n        setChatMessages(prev => [...prev, {\n          id: `system-${Date.now()}`,\n          type: 'system',\n          content: `${data.username} ${data.action}ed the video`,\n          timestamp: data.timestamp\n        }]);\n      }\n    }\n  };\n\n  // Handle chat message event\n  const handleChatMessage = data => {\n    setChatMessages(prev => [...prev, {\n      id: data.messageId,\n      type: 'message',\n      sender: data.username,\n      content: data.message,\n      timestamp: data.timestamp\n    }]);\n  };\n\n  // Handle reaction event\n  const handleReaction = data => {\n    // Show reaction animation\n    setCurrentReaction({\n      emoji: data.emoji,\n      username: data.username,\n      timestamp: Date.now()\n    });\n\n    // Hide reaction after 2 seconds\n    setTimeout(() => {\n      setCurrentReaction(null);\n    }, 2000);\n  };\n\n  // Handle video playback events\n  const handlePlay = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\n    }\n  };\n  const handlePause = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\n    }\n  };\n  const handleSeek = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\n    }\n  };\n\n  // Handle chat input\n  const handleChatSubmit = e => {\n    e.preventDefault();\n    if (messageInput.trim() && isConnected) {\n      // Send the message through the service\n      watchPartyService.sendChatMessage(messageInput);\n\n      // Also add the message to our local state immediately\n      setChatMessages(prev => [...prev, {\n        id: `msg-${Date.now()}`,\n        type: 'message',\n        sender: 'You (Host)',\n        content: messageInput,\n        timestamp: new Date().toISOString()\n      }]);\n\n      // Clear the input field\n      setMessageInput('');\n    }\n  };\n\n  // Handle reaction click\n  const handleReactionClick = emoji => {\n    if (isConnected) {\n      watchPartyService.sendReaction(emoji);\n    }\n    setShowEmojiPicker(false);\n  };\n\n  // Copy party code to clipboard\n  const copyPartyCode = () => {\n    navigator.clipboard.writeText(partyCode);\n    alert(`Party code ${partyCode} copied to clipboard!`);\n  };\n\n  // Format timestamp\n  const formatTimestamp = timestamp => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Toggle microphone\n  const toggleMicrophone = () => {\n    setMicEnabled(!micEnabled);\n    // In a real implementation, this would enable/disable the user's microphone\n  };\n\n  // Add a function to focus the chat input\n  const focusChatInput = () => {\n    if (chatInputRef.current) {\n      chatInputRef.current.focus();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"watch-party-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"party-info-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-info\",\n        children: [/*#__PURE__*/_jsxDEV(FaUsers, {\n          className: \"party-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Watch Party\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"party-code\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: partyCode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"copy-button\",\n            onClick: copyPartyCode,\n            children: /*#__PURE__*/_jsxDEV(FaCopy, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${showChat ? 'active' : ''}`,\n          onClick: () => setShowChat(!showChat),\n          children: /*#__PURE__*/_jsxDEV(FaComments, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${micEnabled ? 'active' : ''}`,\n          onClick: toggleMicrophone,\n          children: micEnabled ? /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-button invite-button\",\n          onClick: () => alert(`Invite your friends using code: ${partyCode}`),\n          children: [/*#__PURE__*/_jsxDEV(FaUserPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Invite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), showChat && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"participants-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Participants (\", participants.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"participants-list\",\n          children: participants.map(participant => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"participant\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `participant-name ${participant.isHost ? 'host' : ''}`,\n              children: [participant.username, participant.isHost && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"host-badge\",\n                children: \"Host\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this)\n          }, participant.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          ref: chatContainerRef,\n          children: chatMessages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `chat-message ${message.type === 'system' ? 'system-message' : ''}`,\n            children: [message.type === 'message' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-sender\",\n                children: message.sender\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: formatTimestamp(message.timestamp)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 19\n            }, this)]\n          }, message.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"chat-input-form\",\n          onSubmit: handleChatSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-input-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: messageInput,\n              onChange: e => setMessageInput(e.target.value),\n              placeholder: \"Type a message...\",\n              className: \"chat-input\",\n              autoComplete: \"off\",\n              ref: chatInputRef,\n              onClick: focusChatInput,\n              onKeyDown: e => {\n                if (e.key === 'Enter' && !e.shiftKey) {\n                  e.preventDefault();\n                  handleChatSubmit(e);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"emoji-button\",\n              onClick: () => setShowEmojiPicker(!showEmojiPicker),\n              children: /*#__PURE__*/_jsxDEV(FaSmile, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"emoji-picker\",\n              children: commonEmojis.map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"emoji\",\n                onClick: () => handleReactionClick(emoji),\n                children: emoji\n              }, emoji, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"send-button\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }, this), currentReaction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reaction-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-emoji\",\n        children: currentReaction.emoji\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-username\",\n        children: currentReaction.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 271,\n    columnNumber: 5\n  }, this);\n};\n_s(WatchParty, \"BMCQZ4AXHuLrBRllfD+kfVXx2ro=\", false, function () {\n  return [useNavigate];\n});\n_c = WatchParty;\nexport default WatchParty;\nvar _c;\n$RefreshReg$(_c, \"WatchParty\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","FaUsers","FaCopy","FaUserPlus","FaComments","FaMicrophone","FaMicrophoneSlash","FaSmile","watchPartyService","jsxDEV","_jsxDEV","WatchParty","movieId","videoRef","isHost","_s","partyCode","setPartyCode","isConnected","setIsConnected","participants","setParticipants","id","username","isSelf","chatMessages","setChatMessages","messageInput","setMessageInput","showChat","setShowChat","micEnabled","setMicEnabled","showEmojiPicker","setShowEmojiPicker","currentReaction","setCurrentReaction","chatContainerRef","chatInputRef","navigate","commonEmojis","randomCode","Math","random","toString","substring","toUpperCase","initializeWatchParty","disconnect","current","scrollTop","scrollHeight","player","getInternalPlayer","addEventListener","handlePlay","handlePause","handleSeek","removeEventListener","roomCode","on","handleUserJoined","handleUserLeft","handlePlaybackUpdate","handleChatMessage","handleReaction","connected","error","console","connect","type","content","timestamp","Date","toISOString","data","some","p","prev","userId","now","filter","action","play","pause","currentTime","messageId","sender","message","emoji","setTimeout","sendPlaybackUpdate","getCurrentTime","handleChatSubmit","e","preventDefault","trim","sendChatMessage","handleReactionClick","sendReaction","copyPartyCode","navigator","clipboard","writeText","alert","formatTimestamp","date","toLocaleTimeString","hour","minute","toggleMicrophone","focusChatInput","focus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","map","participant","ref","onSubmit","value","onChange","target","placeholder","autoComplete","onKeyDown","key","shiftKey","_c","$RefreshReg$"],"sources":["C:/Users/hp/.cursor-tutor/netflix-clone/src/components/WatchParty.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\r\nimport watchPartyService from '../services/watchPartyService';\r\nimport './WatchParty.css';\r\n\r\n// Main component\r\nconst WatchParty = ({ movieId, videoRef, isHost = true }) => {\r\n  const [partyCode, setPartyCode] = useState('');\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [participants, setParticipants] = useState([\r\n    { id: 1, username: 'You (Host)', isHost: true, isSelf: true }\r\n  ]);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [messageInput, setMessageInput] = useState('');\r\n  const [showChat, setShowChat] = useState(true);\r\n  const [micEnabled, setMicEnabled] = useState(false);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [currentReaction, setCurrentReaction] = useState(null);\r\n  \r\n  const chatContainerRef = useRef(null);\r\n  const chatInputRef = useRef(null);\r\n  const navigate = useNavigate();\r\n  \r\n  // Common emojis for reactions\r\n  const commonEmojis = ['👍', '❤️', '😂', '😮', '😢', '👏', '🔥', '🤔'];\r\n  \r\n  // Generate a random party code on mount and initialize watch party\r\n  useEffect(() => {\r\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\r\n    setPartyCode(randomCode);\r\n    \r\n    // Initialize watch party connection\r\n    initializeWatchParty(randomCode);\r\n    \r\n    return () => {\r\n      // Clean up watch party connection on unmount\r\n      watchPartyService.disconnect();\r\n    };\r\n  }, []);\r\n  \r\n  // Auto-scroll chat to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (chatContainerRef.current) {\r\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\r\n    }\r\n  }, [chatMessages]);\r\n  \r\n  // Set up video event listeners\r\n  useEffect(() => {\r\n    if (videoRef && videoRef.current) {\r\n      const player = videoRef.current.getInternalPlayer();\r\n      \r\n      if (player) {\r\n        // Add event listeners to the video player\r\n        player.addEventListener('play', handlePlay);\r\n        player.addEventListener('pause', handlePause);\r\n        player.addEventListener('seeked', handleSeek);\r\n        \r\n        return () => {\r\n          // Remove event listeners when component unmounts\r\n          player.removeEventListener('play', handlePlay);\r\n          player.removeEventListener('pause', handlePause);\r\n          player.removeEventListener('seeked', handleSeek);\r\n        };\r\n      }\r\n    }\r\n  }, [videoRef, isConnected]);\r\n  \r\n  // Initialize watch party\r\n  const initializeWatchParty = (roomCode) => {\r\n    // Set up event handlers\r\n    watchPartyService.on('onUserJoined', handleUserJoined);\r\n    watchPartyService.on('onUserLeft', handleUserLeft);\r\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\r\n    watchPartyService.on('onChatMessage', handleChatMessage);\r\n    watchPartyService.on('onReaction', handleReaction);\r\n    watchPartyService.on('onConnectionChange', (connected) => setIsConnected(connected));\r\n    watchPartyService.on('onError', (error) => console.error('Watch party error:', error));\r\n    \r\n    // Connect to watch party\r\n    watchPartyService.connect(roomCode, 'You (Host)', isHost);\r\n    \r\n    // Add welcome message\r\n    setChatMessages([\r\n      {\r\n        id: `system-welcome`,\r\n        type: 'system',\r\n        content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\r\n        timestamp: new Date().toISOString()\r\n      }\r\n    ]);\r\n  };\r\n  \r\n  // Handle user joined event\r\n  const handleUserJoined = (data) => {\r\n    // Add user to participants list if they're not already in it\r\n    if (!participants.some(p => p.username === data.username)) {\r\n      setParticipants(prev => [\r\n        ...prev,\r\n        { id: data.userId, username: data.username, isHost: data.isHost, isSelf: false }\r\n      ]);\r\n      \r\n      // Add system message to chat\r\n      setChatMessages(prev => [\r\n        ...prev,\r\n        {\r\n          id: `system-${Date.now()}`,\r\n          type: 'system',\r\n          content: `${data.username} joined the watch party`,\r\n          timestamp: data.timestamp\r\n        }\r\n      ]);\r\n    }\r\n  };\r\n  \r\n  // Handle user left event\r\n  const handleUserLeft = (data) => {\r\n    // Remove user from participants list\r\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\r\n    \r\n    // Add system message to chat\r\n    setChatMessages(prev => [\r\n      ...prev,\r\n      {\r\n        id: `system-${Date.now()}`,\r\n        type: 'system',\r\n        content: `${data.username} left the watch party`,\r\n        timestamp: data.timestamp\r\n      }\r\n    ]);\r\n  };\r\n  \r\n  // Handle playback update event\r\n  const handlePlaybackUpdate = (data) => {\r\n    if (videoRef && videoRef.current) {\r\n      const player = videoRef.current.getInternalPlayer();\r\n      \r\n      if (player) {\r\n        // Update video playback state\r\n        if (data.action === 'play') {\r\n          player.play();\r\n        } else if (data.action === 'pause') {\r\n          player.pause();\r\n        } else if (data.action === 'seek') {\r\n          player.currentTime = data.currentTime;\r\n        }\r\n        \r\n        // Add system message to chat\r\n        setChatMessages(prev => [\r\n          ...prev,\r\n          {\r\n            id: `system-${Date.now()}`,\r\n            type: 'system',\r\n            content: `${data.username} ${data.action}ed the video`,\r\n            timestamp: data.timestamp\r\n          }\r\n        ]);\r\n      }\r\n    }\r\n  };\r\n  \r\n  // Handle chat message event\r\n  const handleChatMessage = (data) => {\r\n    setChatMessages(prev => [\r\n      ...prev,\r\n      {\r\n        id: data.messageId,\r\n        type: 'message',\r\n        sender: data.username,\r\n        content: data.message,\r\n        timestamp: data.timestamp\r\n      }\r\n    ]);\r\n  };\r\n  \r\n  // Handle reaction event\r\n  const handleReaction = (data) => {\r\n    // Show reaction animation\r\n    setCurrentReaction({\r\n      emoji: data.emoji,\r\n      username: data.username,\r\n      timestamp: Date.now()\r\n    });\r\n    \r\n    // Hide reaction after 2 seconds\r\n    setTimeout(() => {\r\n      setCurrentReaction(null);\r\n    }, 2000);\r\n  };\r\n  \r\n  // Handle video playback events\r\n  const handlePlay = () => {\r\n    if (isConnected) {\r\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\r\n    }\r\n  };\r\n  \r\n  const handlePause = () => {\r\n    if (isConnected) {\r\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\r\n    }\r\n  };\r\n  \r\n  const handleSeek = () => {\r\n    if (isConnected) {\r\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\r\n    }\r\n  };\r\n  \r\n  // Handle chat input\r\n  const handleChatSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (messageInput.trim() && isConnected) {\r\n      // Send the message through the service\r\n      watchPartyService.sendChatMessage(messageInput);\r\n      \r\n      // Also add the message to our local state immediately\r\n      setChatMessages(prev => [\r\n        ...prev,\r\n        {\r\n          id: `msg-${Date.now()}`,\r\n          type: 'message',\r\n          sender: 'You (Host)',\r\n          content: messageInput,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      ]);\r\n      \r\n      // Clear the input field\r\n      setMessageInput('');\r\n    }\r\n  };\r\n  \r\n  // Handle reaction click\r\n  const handleReactionClick = (emoji) => {\r\n    if (isConnected) {\r\n      watchPartyService.sendReaction(emoji);\r\n    }\r\n    \r\n    setShowEmojiPicker(false);\r\n  };\r\n  \r\n  // Copy party code to clipboard\r\n  const copyPartyCode = () => {\r\n    navigator.clipboard.writeText(partyCode);\r\n    alert(`Party code ${partyCode} copied to clipboard!`);\r\n  };\r\n  \r\n  // Format timestamp\r\n  const formatTimestamp = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n  \r\n  // Toggle microphone\r\n  const toggleMicrophone = () => {\r\n    setMicEnabled(!micEnabled);\r\n    // In a real implementation, this would enable/disable the user's microphone\r\n  };\r\n  \r\n  // Add a function to focus the chat input\r\n  const focusChatInput = () => {\r\n    if (chatInputRef.current) {\r\n      chatInputRef.current.focus();\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"watch-party-container\">\r\n      {/* Party info bar */}\r\n      <div className=\"party-info-bar\">\r\n        <div className=\"party-info\">\r\n          <FaUsers className=\"party-icon\" />\r\n          <span>Watch Party</span>\r\n          <div className=\"party-code\">\r\n            <span>{partyCode}</span>\r\n            <button className=\"copy-button\" onClick={copyPartyCode}>\r\n              <FaCopy />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"party-controls\">\r\n          <button \r\n            className={`control-button ${showChat ? 'active' : ''}`}\r\n            onClick={() => setShowChat(!showChat)}\r\n          >\r\n            <FaComments />\r\n          </button>\r\n          <button \r\n            className={`control-button ${micEnabled ? 'active' : ''}`}\r\n            onClick={toggleMicrophone}\r\n          >\r\n            {micEnabled ? <FaMicrophone /> : <FaMicrophoneSlash />}\r\n          </button>\r\n          <button \r\n            className=\"control-button invite-button\"\r\n            onClick={() => alert(`Invite your friends using code: ${partyCode}`)}\r\n          >\r\n            <FaUserPlus />\r\n            <span>Invite</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Chat sidebar */}\r\n      {showChat && (\r\n        <div className=\"chat-sidebar\">\r\n          <div className=\"participants-section\">\r\n            <h3>Participants ({participants.length})</h3>\r\n            <ul className=\"participants-list\">\r\n              {participants.map(participant => (\r\n                <li key={participant.id} className=\"participant\">\r\n                  <span className={`participant-name ${participant.isHost ? 'host' : ''}`}>\r\n                    {participant.username}\r\n                    {participant.isHost && <span className=\"host-badge\">Host</span>}\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          \r\n          <div className=\"chat-section\">\r\n            <h3>Chat</h3>\r\n            <div className=\"chat-messages\" ref={chatContainerRef}>\r\n              {chatMessages.map(message => (\r\n                <div \r\n                  key={message.id} \r\n                  className={`chat-message ${message.type === 'system' ? 'system-message' : ''}`}\r\n                >\r\n                  {message.type === 'message' && (\r\n                    <div className=\"message-header\">\r\n                      <span className=\"message-sender\">{message.sender}</span>\r\n                      <span className=\"message-time\">{formatTimestamp(message.timestamp)}</span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"message-content\">{message.content}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            \r\n            <form className=\"chat-input-form\" onSubmit={handleChatSubmit}>\r\n              <div className=\"chat-input-container\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={messageInput}\r\n                  onChange={(e) => setMessageInput(e.target.value)}\r\n                  placeholder=\"Type a message...\"\r\n                  className=\"chat-input\"\r\n                  autoComplete=\"off\"\r\n                  ref={chatInputRef}\r\n                  onClick={focusChatInput}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                      e.preventDefault();\r\n                      handleChatSubmit(e);\r\n                    }\r\n                  }}\r\n                />\r\n                <button \r\n                  type=\"button\" \r\n                  className=\"emoji-button\"\r\n                  onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n                >\r\n                  <FaSmile />\r\n                </button>\r\n                {showEmojiPicker && (\r\n                  <div className=\"emoji-picker\">\r\n                    {commonEmojis.map(emoji => (\r\n                      <button\r\n                        key={emoji}\r\n                        type=\"button\"\r\n                        className=\"emoji\"\r\n                        onClick={() => handleReactionClick(emoji)}\r\n                      >\r\n                        {emoji}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <button type=\"submit\" className=\"send-button\">Send</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Reaction display */}\r\n      {currentReaction && (\r\n        <div className=\"reaction-display\">\r\n          <div className=\"reaction-emoji\">{currentReaction.emoji}</div>\r\n          <div className=\"reaction-username\">{currentReaction.username}</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WatchParty; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}