{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\.cursor-tutor\\\\netflix-clone\\\\src\\\\components\\\\WatchParty.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\nimport watchPartyService from '../services/watchPartyService';\nimport './WatchParty.css';\n\n// Main component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WatchParty = ({\n  movieId,\n  videoRef,\n  isHost = true\n}) => {\n  _s();\n  const [partyCode, setPartyCode] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [participants, setParticipants] = useState([{\n    id: 1,\n    username: 'You (Host)',\n    isHost: true,\n    isSelf: true\n  }]);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [messageInput, setMessageInput] = useState('');\n  const [showChat, setShowChat] = useState(true);\n  const [showParticipants, setShowParticipants] = useState(true);\n  const [micEnabled, setMicEnabled] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [currentReaction, setCurrentReaction] = useState(null);\n  const chatContainerRef = useRef(null);\n  const chatInputRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Common emojis for reactions\n  const commonEmojis = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘', 'ðŸ”¥', 'ðŸ¤”'];\n\n  // Component did mount effect\n  useEffect(() => {\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n    setPartyCode(randomCode);\n\n    // Initialize watch party connection\n    initializeWatchParty(randomCode);\n\n    // Hide participants list after a delay\n    setTimeout(() => {\n      setShowParticipants(false);\n    }, 5000);\n    return () => {\n      // Clean up watch party connection on unmount\n      watchPartyService.disconnect();\n    };\n  }, []);\n\n  // Auto-scroll chat to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  // Set up video event listeners\n  useEffect(() => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Add event listeners to the video player\n        player.addEventListener('play', handlePlay);\n        player.addEventListener('pause', handlePause);\n        player.addEventListener('seeked', handleSeek);\n        return () => {\n          // Remove event listeners when component unmounts\n          player.removeEventListener('play', handlePlay);\n          player.removeEventListener('pause', handlePause);\n          player.removeEventListener('seeked', handleSeek);\n        };\n      }\n    }\n  }, [videoRef, isConnected]);\n\n  // Initialize watch party\n  const initializeWatchParty = roomCode => {\n    console.log('Initializing watch party with code:', roomCode);\n\n    // Set up event handlers\n    watchPartyService.on('onUserJoined', handleUserJoined);\n    watchPartyService.on('onUserLeft', handleUserLeft);\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\n    watchPartyService.on('onChatMessage', handleChatMessage);\n    watchPartyService.on('onReaction', handleReaction);\n    watchPartyService.on('onConnectionChange', connected => {\n      console.log('Connection status changed:', connected);\n      setIsConnected(connected);\n    });\n    watchPartyService.on('onError', error => console.error('Watch party error:', error));\n\n    // Connect to watch party\n    const connected = watchPartyService.connect(roomCode, 'You (Host)', isHost);\n    console.log('Connected to watch party:', connected);\n\n    // Set connected state immediately to allow chat functionality\n    setIsConnected(true);\n\n    // Add welcome message\n    setChatMessages([{\n      id: `system-welcome`,\n      type: 'system',\n      content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\n      timestamp: new Date().toISOString()\n    }]);\n\n    // Focus the chat input after a short delay\n    setTimeout(() => {\n      if (chatInputRef.current) {\n        chatInputRef.current.focus();\n      }\n    }, 1000);\n  };\n\n  // Handle user joined event\n  const handleUserJoined = data => {\n    // Add user to participants list if they're not already in it\n    if (!participants.some(p => p.username === data.username)) {\n      setParticipants(prev => [...prev, {\n        id: data.userId,\n        username: data.username,\n        isHost: data.isHost,\n        isSelf: false\n      }]);\n\n      // Add system message to chat\n      setChatMessages(prev => [...prev, {\n        id: `system-${Date.now()}`,\n        type: 'system',\n        content: `${data.username} joined the watch party`,\n        timestamp: data.timestamp\n      }]);\n\n      // Hide participants list after 3 or more users have joined (including host)\n      if (participants.length >= 2) {\n        setTimeout(() => {\n          setShowParticipants(false);\n        }, 2000);\n      }\n    }\n  };\n\n  // Handle user left event\n  const handleUserLeft = data => {\n    // Remove user from participants list\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\n\n    // Add system message to chat\n    setChatMessages(prev => [...prev, {\n      id: `system-${Date.now()}`,\n      type: 'system',\n      content: `${data.username} left the watch party`,\n      timestamp: data.timestamp\n    }]);\n  };\n\n  // Handle playback update event\n  const handlePlaybackUpdate = data => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      if (player) {\n        // Update video playback state\n        if (data.action === 'play') {\n          player.play();\n        } else if (data.action === 'pause') {\n          player.pause();\n        } else if (data.action === 'seek') {\n          player.currentTime = data.currentTime;\n        }\n\n        // Add system message to chat\n        setChatMessages(prev => [...prev, {\n          id: `system-${Date.now()}`,\n          type: 'system',\n          content: `${data.username} ${data.action}ed the video`,\n          timestamp: data.timestamp\n        }]);\n      }\n    }\n  };\n\n  // Handle chat message event\n  const handleChatMessage = data => {\n    console.log('Received chat message:', data);\n\n    // Check if this message is from the current user\n    const isSelfMessage = data.username === 'You (Host)';\n    setChatMessages(prev => [...prev, {\n      id: data.messageId,\n      type: 'message',\n      sender: data.username,\n      content: data.message,\n      timestamp: data.timestamp,\n      isSelf: isSelfMessage\n    }]);\n  };\n\n  // Handle reaction event\n  const handleReaction = data => {\n    // Show reaction animation\n    setCurrentReaction({\n      emoji: data.emoji,\n      username: data.username,\n      timestamp: Date.now()\n    });\n\n    // Hide reaction after 2 seconds\n    setTimeout(() => {\n      setCurrentReaction(null);\n    }, 2000);\n  };\n\n  // Handle video playback events\n  const handlePlay = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\n    }\n  };\n  const handlePause = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\n    }\n  };\n  const handleSeek = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\n    }\n  };\n\n  // Handle chat input\n  const handleChatSubmit = e => {\n    e.preventDefault();\n    console.log('Chat submit triggered');\n\n    // Always allow sending messages even if connection status is uncertain\n    if (messageInput.trim()) {\n      try {\n        console.log('Sending chat message:', messageInput);\n\n        // Send the message through the service if connected\n        if (isConnected) {\n          watchPartyService.sendChatMessage(messageInput);\n          // Don't add to local state here, as the service will trigger handleChatMessage\n          // which will add the message to the chat\n        } else {\n          console.log('Not connected, but still adding message to local state');\n          // Only add to local state directly if not connected\n          setChatMessages(prev => [...prev, {\n            id: `msg-${Date.now()}`,\n            type: 'message',\n            sender: 'You (Host)',\n            content: messageInput,\n            timestamp: new Date().toISOString()\n          }]);\n        }\n\n        // Clear the input field\n        setMessageInput('');\n\n        // Force connection if not already connected\n        if (!isConnected) {\n          console.log('Attempting to reconnect...');\n          const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n          initializeWatchParty(randomCode);\n        }\n      } catch (error) {\n        console.error('Error sending chat message:', error);\n        alert('Failed to send message. Please try again.');\n      }\n    } else {\n      console.log('Cannot send empty message');\n    }\n  };\n\n  // Handle reaction click\n  const handleReactionClick = emoji => {\n    if (isConnected) {\n      watchPartyService.sendReaction(emoji);\n    }\n    setShowEmojiPicker(false);\n  };\n\n  // Copy party code to clipboard\n  const copyPartyCode = () => {\n    navigator.clipboard.writeText(partyCode);\n    alert(`Party code ${partyCode} copied to clipboard!`);\n  };\n\n  // Format timestamp\n  const formatTimestamp = timestamp => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Toggle microphone\n  const toggleMicrophone = () => {\n    setMicEnabled(!micEnabled);\n    // In a real implementation, this would enable/disable the user's microphone\n  };\n\n  // Add a function to focus the chat input\n  const focusChatInput = () => {\n    if (chatInputRef.current) {\n      chatInputRef.current.focus();\n    }\n  };\n\n  // Toggle participants list\n  const toggleParticipants = e => {\n    if (e) e.stopPropagation();\n    setShowParticipants(!showParticipants);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"watch-party-container\",\n    onClick: e => {\n      // Prevent clicks in the watch party container from affecting the video player\n      e.stopPropagation();\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"party-info-bar\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-info\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(FaUsers, {\n          className: \"party-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Watch Party\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"party-code\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: partyCode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"copy-button\",\n            onClick: e => {\n              e.stopPropagation();\n              copyPartyCode();\n            },\n            children: /*#__PURE__*/_jsxDEV(FaCopy, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"party-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${showChat ? 'active' : ''}`,\n          onClick: e => {\n            e.stopPropagation();\n            setShowChat(!showChat);\n          },\n          children: /*#__PURE__*/_jsxDEV(FaComments, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${showParticipants ? 'active' : ''}`,\n          onClick: toggleParticipants,\n          children: [/*#__PURE__*/_jsxDEV(FaUsers, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"participant-count\",\n            children: participants.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${micEnabled ? 'active' : ''}`,\n          onClick: e => {\n            e.stopPropagation();\n            toggleMicrophone();\n          },\n          children: micEnabled ? /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-button invite-button\",\n          onClick: e => {\n            e.stopPropagation();\n            alert(`Invite your friends using code: ${partyCode}`);\n          },\n          children: [/*#__PURE__*/_jsxDEV(FaUserPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Invite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), showChat && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-sidebar\",\n      onClick: e => {\n        // Prevent clicks in the chat sidebar from affecting the video player\n        e.stopPropagation();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-sidebar-content\",\n        children: [showParticipants && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"participants-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Participants (\", participants.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"participants-list\",\n            children: participants.map(participant => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"participant\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `participant-name ${participant.isHost ? 'host' : ''}`,\n                children: [participant.username, participant.isHost && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"host-badge\",\n                  children: \"Host\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 48\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 23\n              }, this)\n            }, participant.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `chat-section ${!showParticipants ? 'full-height' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-messages\",\n            ref: chatContainerRef,\n            onClick: e => e.stopPropagation(),\n            children: chatMessages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `chat-message ${message.type === 'system' ? 'system-message' : ''}`,\n              children: [message.type === 'message' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"message-sender\",\n                  children: message.sender\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"message-time\",\n                  children: formatTimestamp(message.timestamp)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-content\",\n                children: message.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 21\n              }, this)]\n            }, message.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"chat-input-form\",\n        onSubmit: e => {\n          e.preventDefault();\n          e.stopPropagation();\n          handleChatSubmit(e);\n        },\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-input-container\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: messageInput,\n            onChange: e => {\n              e.stopPropagation();\n              console.log('Input changed:', e.target.value);\n              setMessageInput(e.target.value);\n            },\n            placeholder: \"Type a message...\",\n            className: \"chat-input\",\n            autoComplete: \"off\",\n            ref: chatInputRef,\n            onClick: e => {\n              e.stopPropagation();\n              focusChatInput();\n            },\n            onKeyDown: e => {\n              e.stopPropagation();\n              console.log('Key pressed:', e.key);\n              if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                handleChatSubmit(e);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"emoji-button\",\n            onClick: e => {\n              e.stopPropagation();\n              setShowEmojiPicker(!showEmojiPicker);\n            },\n            children: /*#__PURE__*/_jsxDEV(FaSmile, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"emoji-picker\",\n            onClick: e => e.stopPropagation(),\n            children: commonEmojis.map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"emoji\",\n              onClick: e => {\n                e.stopPropagation();\n                handleReactionClick(emoji);\n              },\n              children: emoji\n            }, emoji, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"send-button\",\n          onClick: e => {\n            e.stopPropagation();\n            handleChatSubmit(e);\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 9\n    }, this), currentReaction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reaction-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-emoji\",\n        children: currentReaction.emoji\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-username\",\n        children: currentReaction.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 5\n  }, this);\n};\n_s(WatchParty, \"qJSNp8oQB5AL1/98HB6D9WW1kDU=\", false, function () {\n  return [useNavigate];\n});\n_c = WatchParty;\nexport default WatchParty;\nvar _c;\n$RefreshReg$(_c, \"WatchParty\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","FaUsers","FaCopy","FaUserPlus","FaComments","FaMicrophone","FaMicrophoneSlash","FaSmile","watchPartyService","jsxDEV","_jsxDEV","WatchParty","movieId","videoRef","isHost","_s","partyCode","setPartyCode","isConnected","setIsConnected","participants","setParticipants","id","username","isSelf","chatMessages","setChatMessages","messageInput","setMessageInput","showChat","setShowChat","showParticipants","setShowParticipants","micEnabled","setMicEnabled","showEmojiPicker","setShowEmojiPicker","currentReaction","setCurrentReaction","chatContainerRef","chatInputRef","navigate","commonEmojis","randomCode","Math","random","toString","substring","toUpperCase","initializeWatchParty","setTimeout","disconnect","current","scrollTop","scrollHeight","player","getInternalPlayer","addEventListener","handlePlay","handlePause","handleSeek","removeEventListener","roomCode","console","log","on","handleUserJoined","handleUserLeft","handlePlaybackUpdate","handleChatMessage","handleReaction","connected","error","connect","type","content","timestamp","Date","toISOString","focus","data","some","p","prev","userId","now","length","filter","action","play","pause","currentTime","isSelfMessage","messageId","sender","message","emoji","sendPlaybackUpdate","getCurrentTime","handleChatSubmit","e","preventDefault","trim","sendChatMessage","alert","handleReactionClick","sendReaction","copyPartyCode","navigator","clipboard","writeText","formatTimestamp","date","toLocaleTimeString","hour","minute","toggleMicrophone","focusChatInput","toggleParticipants","stopPropagation","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","map","participant","ref","onSubmit","value","onChange","target","placeholder","autoComplete","onKeyDown","key","shiftKey","_c","$RefreshReg$"],"sources":["C:/Users/hp/.cursor-tutor/netflix-clone/src/components/WatchParty.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaUsers, FaCopy, FaUserPlus, FaComments, FaMicrophone, FaMicrophoneSlash, FaSmile } from 'react-icons/fa';\nimport watchPartyService from '../services/watchPartyService';\nimport './WatchParty.css';\n\n// Main component\nconst WatchParty = ({ movieId, videoRef, isHost = true }) => {\n  const [partyCode, setPartyCode] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [participants, setParticipants] = useState([\n    { id: 1, username: 'You (Host)', isHost: true, isSelf: true }\n  ]);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [messageInput, setMessageInput] = useState('');\n  const [showChat, setShowChat] = useState(true);\n  const [showParticipants, setShowParticipants] = useState(true);\n  const [micEnabled, setMicEnabled] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [currentReaction, setCurrentReaction] = useState(null);\n  \n  const chatContainerRef = useRef(null);\n  const chatInputRef = useRef(null);\n  const navigate = useNavigate();\n  \n  // Common emojis for reactions\n  const commonEmojis = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘', 'ðŸ”¥', 'ðŸ¤”'];\n  \n  // Component did mount effect\n  useEffect(() => {\n    const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n    setPartyCode(randomCode);\n    \n    // Initialize watch party connection\n    initializeWatchParty(randomCode);\n    \n    // Hide participants list after a delay\n    setTimeout(() => {\n      setShowParticipants(false);\n    }, 5000);\n    \n    return () => {\n      // Clean up watch party connection on unmount\n      watchPartyService.disconnect();\n    };\n  }, []);\n  \n  // Auto-scroll chat to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n  \n  // Set up video event listeners\n  useEffect(() => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      \n      if (player) {\n        // Add event listeners to the video player\n        player.addEventListener('play', handlePlay);\n        player.addEventListener('pause', handlePause);\n        player.addEventListener('seeked', handleSeek);\n        \n        return () => {\n          // Remove event listeners when component unmounts\n          player.removeEventListener('play', handlePlay);\n          player.removeEventListener('pause', handlePause);\n          player.removeEventListener('seeked', handleSeek);\n        };\n      }\n    }\n  }, [videoRef, isConnected]);\n  \n  // Initialize watch party\n  const initializeWatchParty = (roomCode) => {\n    console.log('Initializing watch party with code:', roomCode);\n    \n    // Set up event handlers\n    watchPartyService.on('onUserJoined', handleUserJoined);\n    watchPartyService.on('onUserLeft', handleUserLeft);\n    watchPartyService.on('onPlaybackUpdate', handlePlaybackUpdate);\n    watchPartyService.on('onChatMessage', handleChatMessage);\n    watchPartyService.on('onReaction', handleReaction);\n    watchPartyService.on('onConnectionChange', (connected) => {\n      console.log('Connection status changed:', connected);\n      setIsConnected(connected);\n    });\n    watchPartyService.on('onError', (error) => console.error('Watch party error:', error));\n    \n    // Connect to watch party\n    const connected = watchPartyService.connect(roomCode, 'You (Host)', isHost);\n    console.log('Connected to watch party:', connected);\n    \n    // Set connected state immediately to allow chat functionality\n    setIsConnected(true);\n    \n    // Add welcome message\n    setChatMessages([\n      {\n        id: `system-welcome`,\n        type: 'system',\n        content: `Welcome to the watch party! Share code ${roomCode} with friends to invite them.`,\n        timestamp: new Date().toISOString()\n      }\n    ]);\n    \n    // Focus the chat input after a short delay\n    setTimeout(() => {\n      if (chatInputRef.current) {\n        chatInputRef.current.focus();\n      }\n    }, 1000);\n  };\n  \n  // Handle user joined event\n  const handleUserJoined = (data) => {\n    // Add user to participants list if they're not already in it\n    if (!participants.some(p => p.username === data.username)) {\n      setParticipants(prev => [\n        ...prev,\n        { id: data.userId, username: data.username, isHost: data.isHost, isSelf: false }\n      ]);\n      \n      // Add system message to chat\n      setChatMessages(prev => [\n        ...prev,\n        {\n          id: `system-${Date.now()}`,\n          type: 'system',\n          content: `${data.username} joined the watch party`,\n          timestamp: data.timestamp\n        }\n      ]);\n      \n      // Hide participants list after 3 or more users have joined (including host)\n      if (participants.length >= 2) {\n        setTimeout(() => {\n          setShowParticipants(false);\n        }, 2000);\n      }\n    }\n  };\n  \n  // Handle user left event\n  const handleUserLeft = (data) => {\n    // Remove user from participants list\n    setParticipants(prev => prev.filter(p => p.id !== data.userId));\n    \n    // Add system message to chat\n    setChatMessages(prev => [\n      ...prev,\n      {\n        id: `system-${Date.now()}`,\n        type: 'system',\n        content: `${data.username} left the watch party`,\n        timestamp: data.timestamp\n      }\n    ]);\n  };\n  \n  // Handle playback update event\n  const handlePlaybackUpdate = (data) => {\n    if (videoRef && videoRef.current) {\n      const player = videoRef.current.getInternalPlayer();\n      \n      if (player) {\n        // Update video playback state\n        if (data.action === 'play') {\n          player.play();\n        } else if (data.action === 'pause') {\n          player.pause();\n        } else if (data.action === 'seek') {\n          player.currentTime = data.currentTime;\n        }\n        \n        // Add system message to chat\n        setChatMessages(prev => [\n          ...prev,\n          {\n            id: `system-${Date.now()}`,\n            type: 'system',\n            content: `${data.username} ${data.action}ed the video`,\n            timestamp: data.timestamp\n          }\n        ]);\n      }\n    }\n  };\n  \n  // Handle chat message event\n  const handleChatMessage = (data) => {\n    console.log('Received chat message:', data);\n    \n    // Check if this message is from the current user\n    const isSelfMessage = data.username === 'You (Host)';\n    \n    setChatMessages(prev => [\n      ...prev,\n      {\n        id: data.messageId,\n        type: 'message',\n        sender: data.username,\n        content: data.message,\n        timestamp: data.timestamp,\n        isSelf: isSelfMessage\n      }\n    ]);\n  };\n  \n  // Handle reaction event\n  const handleReaction = (data) => {\n    // Show reaction animation\n    setCurrentReaction({\n      emoji: data.emoji,\n      username: data.username,\n      timestamp: Date.now()\n    });\n    \n    // Hide reaction after 2 seconds\n    setTimeout(() => {\n      setCurrentReaction(null);\n    }, 2000);\n  };\n  \n  // Handle video playback events\n  const handlePlay = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('play', videoRef.current.getCurrentTime());\n    }\n  };\n  \n  const handlePause = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('pause', videoRef.current.getCurrentTime());\n    }\n  };\n  \n  const handleSeek = () => {\n    if (isConnected) {\n      watchPartyService.sendPlaybackUpdate('seek', videoRef.current.getCurrentTime());\n    }\n  };\n  \n  // Handle chat input\n  const handleChatSubmit = (e) => {\n    e.preventDefault();\n    console.log('Chat submit triggered');\n    \n    // Always allow sending messages even if connection status is uncertain\n    if (messageInput.trim()) {\n      try {\n        console.log('Sending chat message:', messageInput);\n        \n        // Send the message through the service if connected\n        if (isConnected) {\n          watchPartyService.sendChatMessage(messageInput);\n          // Don't add to local state here, as the service will trigger handleChatMessage\n          // which will add the message to the chat\n        } else {\n          console.log('Not connected, but still adding message to local state');\n          // Only add to local state directly if not connected\n          setChatMessages(prev => [\n            ...prev,\n            {\n              id: `msg-${Date.now()}`,\n              type: 'message',\n              sender: 'You (Host)',\n              content: messageInput,\n              timestamp: new Date().toISOString()\n            }\n          ]);\n        }\n        \n        // Clear the input field\n        setMessageInput('');\n        \n        // Force connection if not already connected\n        if (!isConnected) {\n          console.log('Attempting to reconnect...');\n          const randomCode = Math.random().toString(36).substring(2, 8).toUpperCase();\n          initializeWatchParty(randomCode);\n        }\n      } catch (error) {\n        console.error('Error sending chat message:', error);\n        alert('Failed to send message. Please try again.');\n      }\n    } else {\n      console.log('Cannot send empty message');\n    }\n  };\n  \n  // Handle reaction click\n  const handleReactionClick = (emoji) => {\n    if (isConnected) {\n      watchPartyService.sendReaction(emoji);\n    }\n    \n    setShowEmojiPicker(false);\n  };\n  \n  // Copy party code to clipboard\n  const copyPartyCode = () => {\n    navigator.clipboard.writeText(partyCode);\n    alert(`Party code ${partyCode} copied to clipboard!`);\n  };\n  \n  // Format timestamp\n  const formatTimestamp = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n  \n  // Toggle microphone\n  const toggleMicrophone = () => {\n    setMicEnabled(!micEnabled);\n    // In a real implementation, this would enable/disable the user's microphone\n  };\n  \n  // Add a function to focus the chat input\n  const focusChatInput = () => {\n    if (chatInputRef.current) {\n      chatInputRef.current.focus();\n    }\n  };\n  \n  // Toggle participants list\n  const toggleParticipants = (e) => {\n    if (e) e.stopPropagation();\n    setShowParticipants(!showParticipants);\n  };\n  \n  return (\n    <div \n      className=\"watch-party-container\"\n      onClick={(e) => {\n        // Prevent clicks in the watch party container from affecting the video player\n        e.stopPropagation();\n      }}\n    >\n      {/* Party info bar */}\n      <div \n        className=\"party-info-bar\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div \n          className=\"party-info\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <FaUsers className=\"party-icon\" />\n          <span>Watch Party</span>\n          <div className=\"party-code\">\n            <span>{partyCode}</span>\n            <button \n              className=\"copy-button\" \n              onClick={(e) => {\n                e.stopPropagation();\n                copyPartyCode();\n              }}\n            >\n              <FaCopy />\n            </button>\n          </div>\n        </div>\n        <div className=\"party-controls\">\n          <button \n            className={`control-button ${showChat ? 'active' : ''}`}\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowChat(!showChat);\n            }}\n          >\n            <FaComments />\n          </button>\n          <button \n            className={`control-button ${showParticipants ? 'active' : ''}`}\n            onClick={toggleParticipants}\n          >\n            <FaUsers />\n            <span className=\"participant-count\">{participants.length}</span>\n          </button>\n          <button \n            className={`control-button ${micEnabled ? 'active' : ''}`}\n            onClick={(e) => {\n              e.stopPropagation();\n              toggleMicrophone();\n            }}\n          >\n            {micEnabled ? <FaMicrophone /> : <FaMicrophoneSlash />}\n          </button>\n          <button \n            className=\"control-button invite-button\"\n            onClick={(e) => {\n              e.stopPropagation();\n              alert(`Invite your friends using code: ${partyCode}`);\n            }}\n          >\n            <FaUserPlus />\n            <span>Invite</span>\n          </button>\n        </div>\n      </div>\n      \n      {/* Chat sidebar */}\n      {showChat && (\n        <div \n          className=\"chat-sidebar\" \n          onClick={(e) => {\n            // Prevent clicks in the chat sidebar from affecting the video player\n            e.stopPropagation();\n          }}\n        >\n          <div className=\"chat-sidebar-content\">\n            {showParticipants && (\n              <div className=\"participants-section\">\n                <h3>Participants ({participants.length})</h3>\n                <ul className=\"participants-list\">\n                  {participants.map(participant => (\n                    <li key={participant.id} className=\"participant\">\n                      <span className={`participant-name ${participant.isHost ? 'host' : ''}`}>\n                        {participant.username}\n                        {participant.isHost && <span className=\"host-badge\">Host</span>}\n                      </span>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            \n            <div className={`chat-section ${!showParticipants ? 'full-height' : ''}`}>\n              <h3>Chat</h3>\n              <div \n                className=\"chat-messages\" \n                ref={chatContainerRef}\n                onClick={(e) => e.stopPropagation()}\n              >\n                {chatMessages.map(message => (\n                  <div \n                    key={message.id} \n                    className={`chat-message ${message.type === 'system' ? 'system-message' : ''}`}\n                  >\n                    {message.type === 'message' && (\n                      <div className=\"message-header\">\n                        <span className=\"message-sender\">{message.sender}</span>\n                        <span className=\"message-time\">{formatTimestamp(message.timestamp)}</span>\n                      </div>\n                    )}\n                    <div className=\"message-content\">{message.content}</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          {/* Chat input form - Always visible at the bottom */}\n          <form \n            className=\"chat-input-form\" \n            onSubmit={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              handleChatSubmit(e);\n            }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div \n              className=\"chat-input-container\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <input\n                type=\"text\"\n                value={messageInput}\n                onChange={(e) => {\n                  e.stopPropagation();\n                  console.log('Input changed:', e.target.value);\n                  setMessageInput(e.target.value);\n                }}\n                placeholder=\"Type a message...\"\n                className=\"chat-input\"\n                autoComplete=\"off\"\n                ref={chatInputRef}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  focusChatInput();\n                }}\n                onKeyDown={(e) => {\n                  e.stopPropagation();\n                  console.log('Key pressed:', e.key);\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n                    handleChatSubmit(e);\n                  }\n                }}\n              />\n              <button \n                type=\"button\" \n                className=\"emoji-button\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setShowEmojiPicker(!showEmojiPicker);\n                }}\n              >\n                <FaSmile />\n              </button>\n              {showEmojiPicker && (\n                <div \n                  className=\"emoji-picker\"\n                  onClick={(e) => e.stopPropagation()}\n                >\n                  {commonEmojis.map(emoji => (\n                    <button\n                      key={emoji}\n                      type=\"button\"\n                      className=\"emoji\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleReactionClick(emoji);\n                      }}\n                    >\n                      {emoji}\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n            <button \n              type=\"button\" \n              className=\"send-button\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleChatSubmit(e);\n              }}\n            >\n              Send\n            </button>\n          </form>\n        </div>\n      )}\n      \n      {/* Reaction display */}\n      {currentReaction && (\n        <div className=\"reaction-display\">\n          <div className=\"reaction-emoji\">{currentReaction.emoji}</div>\n          <div className=\"reaction-username\">{currentReaction.username}</div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WatchParty; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}